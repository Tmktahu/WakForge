import{Q as P,_ as se,b as ne,f as Y,a0 as pe,r as H,g as z,o as t,n as O,w as q,j as l,A as j,a1 as oe,t as h,q as B,Z as K,h as i,l as I,F as V,m as F,E as he,i as ee,k as x,I as ce,O as te,L as W,v as ye,a2 as fe,a3 as ge,T as ae,s as de,x as me,a as _e,y as ke,H as $e,a4 as le,a5 as ie}from"./index-84cc158b.js";const xe=()=>{const u=M=>{let R=L(M),m="https://www.wakfu.com/en/mmorpg/encyclopedia",b="";return M.type.validSlots.includes(P.FIRST_WEAPON.id)||M.type.validSlots.includes(P.SECOND_WEAPON.id)?b=`${m}/weapons/${R}`:M.type.validSlots.includes(P.PET.id)?b=`${m}/pets/${R}`:M.type.validSlots.includes(P.MOUNT.id)?b=`${m}/mounts/${R}`:M.type.validSlots.includes(P.ACCESSORY.id)?b=`${m}/accessories/${R}`:b=`${m}/armors/${R}`,b},L=M=>{let R=M.id,m=M.name.toLowerCase().replace(" ","-");return`${R}-${m}`};return{getItemEncyclopediaUrl:u}};const we={class:"state-title py-2 px-2"},be={key:0,class:"px-2 py-1",style:{background:"var(--error-50)","white-space":"break-line","max-width":"45ch"}},Se={class:"state-description"},Ee={class:"flex flex-column"},Ae=["innerHTML"],Ce={__name:"MultiTooltip",props:{stateId:{type:String,default:""},currentLevel:{type:Number,default:1},sticky:{type:Boolean,default:!1},inline:{type:Boolean,default:!1}},setup(u){const L=u,{t:M}=ne(),R=Y(()=>pe.find(c=>c.id===L.stateId));let m=null;const b=H(0),A=c=>{c.isVisible&&b.value===0?m=setInterval(D,10):(clearInterval(m),b.value=0)},D=()=>{b.value++,b.value===100&&clearInterval(m)},U=c=>{var a,v,f,g,S;return`${c.indented?'<i class="mdi mdi-arrow-right-bottom" style="margin-top: -2px; margin-right: 4px;"></i>':""}${M(`states.${c.text}`,{img_fire:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/FIRE.png" /></div>',img_earth:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/EARTH.png" /></div>',img_water:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/WATER.png" /></div>',img_air:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/AIR.png" /></div>',img_physical:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/PHYSICAL.png" /></div>',img_light:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/LIGHT.png" /></div>',img_ecnbi:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/ecnbi.png" /></div>',img_ecnbr:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/ecnbr.png" /></div>',img_ally:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/ally.png" /></div>',img_enemy:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/enemy.png" /></div>',img_circling:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/CIRCLERING.png" /></div>',num_0:`${(a=c.num_0)==null?void 0:a[`level_${L.currentLevel}`]}`,num_1:`${(v=c.num_1)==null?void 0:v[`level_${L.currentLevel}`]}`,num_2:`${(f=c.num_2)==null?void 0:f[`level_${L.currentLevel}`]}`,num_3:`${(g=c.num_3)==null?void 0:g[`level_${L.currentLevel}`]}`,num_4:`${(S=c.num_4)==null?void 0:S[`level_${L.currentLevel}`]}`})}`};return(c,a)=>{const v=z("p-progressBar"),f=z("tippy");return t(),O(f,he({duration:"0","max-width":"fit-content",interactive:b.value===100||!u.sticky,"interactive-border":u.sticky?2e3:20},c.$attrs,{onState:A}),{content:q(()=>[l("div",{class:j(["multi-tooltip",{stuck:b.value===100&&u.sticky}])},[oe(c.$slots,"content",{},()=>{var g,S;return[l("div",we,[l("span",null,h(c.$t("tooltips.stateAtLevel",{state:c.$t(`states.${(g=R.value)==null?void 0:g.name}`),num_0:Math.min(B(K)[u.stateId],u.currentLevel)||u.currentLevel,num_1:B(K)[u.stateId]===void 0?"??":B(K)[u.stateId]})),1)]),u.stateId&&B(K)[u.stateId]===void 0?(t(),i("div",be,h(c.$t("tooltips.missingInfoAboutState")),1)):I("",!0),l("div",Se,[l("div",Ee,[(t(!0),i(V,null,F((S=R.value)==null?void 0:S.descriptionData,n=>(t(),i("div",{key:n.text,class:j([{"pl-3":n.indented,"px-2":!n.indented,indented:n.indented},"description-line py-1"]),innerHTML:U(n)},null,10,Ae))),128))])])]},!0),u.sticky?(t(),O(v,{key:0,value:b.value,pt:{value:{style:{transition:"none"}}}},null,8,["value"])):I("",!0)],2)]),default:q(()=>[oe(c.$slots,"trigger",{},()=>{var g;return[l("div",{class:j(["tooltip-trigger",{"inline-tooltip-trigger":u.inline}]),style:{width:"fit-content"}},h(c.$t(`states.${(g=R.value)==null?void 0:g.name}`)),3)]},!0)]),_:3},16,["interactive","interactive-border"])}}},X=se(Ce,[["__scopeId","data-v-4a4bff47"]]);const Ie={class:"flex flex-column"},Te={class:"effect-list-wrapper flex-grow-1",style:{"border-spacing":"0"}},We={class:"flex align-items-center w-full px-1 py-1"},qe={key:0,class:"effect-text flex flex-column"},Me={key:1,class:"effect-text"},Re={key:1,class:"equipped-item-effect",style:{"min-width":"50px"}},Le={key:1,class:"new-item-effect"},De={class:"flex align-items-center w-full px-1 py-1"},Oe={key:1,class:"flex align-items-center"},Be={key:2},Ve={class:"flex align-items-center w-full px-1 py-1"},je={key:1,class:"effect-text flex flex-column"},Ne={key:2,class:"effect-text"},Fe={key:0,class:"effect-line totals"},Pe={key:0,class:"equipped-item-effect",style:{"border-top":"3px solid var(--secondary-70)"}},Ue={class:"flex align-items-center w-full px-1 py-1"},He={class:"new-item-effect",style:{"border-top":"3px solid var(--primary-70)"}},ze={class:"flex align-items-center w-full px-1 py-1"},Ye={key:1,class:"effect-line totals"},Ge={key:0,class:"equipped-item-effect",style:{"border-top":"3px solid var(--secondary-70)"}},Qe={class:"flex align-items-center w-full px-1 py-1"},Ze={class:"new-item-effect"},Je={class:"flex align-items-center w-full px-1 py-1",style:{"border-top":"3px solid var(--primary-70)"}},Xe={__name:"ItemStatList",props:{item:{type:Object,default:()=>{}},cardMode:{type:Boolean,default:!1},withComparisons:{type:Boolean,default:!1},withTotals:{type:Boolean,default:!1}},setup(u){let L=u;const{t:M}=ne(),R=ee("currentCharacter"),m=Y(()=>{var T,d,E;let r=L.item.type.validSlots[0],s=(T=R==null?void 0:R.value)==null?void 0:T.equipment[r];return s&&((d=s.item)==null?void 0:d.id)!==((E=L.item)==null?void 0:E.id)?s.item:null}),b=Y(()=>{var r,s;let n={};return(s=(r=L.item)==null?void 0:r.equipEffects)==null||s.forEach(T=>{n[T.id]=T}),n}),A=Y(()=>{var r,s;let n={};return(s=(r=m.value)==null?void 0:r.equipEffects)==null||s.forEach(T=>{n[T.id]=T}),n}),D=Y(()=>[...Object.keys(b.value),...Object.keys(A.value)].filter((n,r,s)=>s.indexOf(n)===r)),U=n=>!!["400","1020"].includes(n),c=n=>{let r=Object.keys(W).find(s=>W[s].rawIds.includes(n));return r===void 0?null:W[r]},a=n=>{if(n.id===1068)return M("tooltips.randomMasteryValue",{num_0:n.values[0],num_1:n.values[2]});if(n.id===1069)return M("tooltips.randomResistanceValue",{num_0:n.values[0],num_1:n.values[2]});{let r=v(n),s=M(c(n.id).text);return`${r>0?"+":""}${r}${s.charAt(0)==="%"?"":" "}${s}`}},v=n=>{let r=n.values[0],s=0;return te.includes(L.item.type.id)?L.item.id===12237?s=r+25*n.values[1]:s=r+50*n.values[1]:s=r,Math.floor(s)},f=n=>{let r=0,s=b.value[n];s&&(r=v(s));let T=0,d=A.value[n];return d&&(T=v(d)),r-T},g=n=>{var T;let r=0,s=[...W.elementalMastery.rawIds,...W.fireMastery.rawIds,...W.earthMastery.rawIds,...W.waterMastery.rawIds,...W.airMastery.rawIds,...W.rearMastery.rawIds,...W.meleeMastery.rawIds,...W.distanceMastery.rawIds,...W.berserkMastery.rawIds,...W.criticalMastery.rawIds,...W.randomElementalMasteries.rawIds];return(T=n==null?void 0:n.equipEffects)==null||T.forEach(d=>{s.includes(d.id)&&(r+=d.values[0])}),r},S=n=>{var T;let r=0,s=[...W.rearResistance.rawIds,...W.elementalResistance.rawIds,...W.fireResistance.rawIds,...W.waterResistance.rawIds,...W.earthResistance.rawIds,...W.airResistance.rawIds,...W.criticalResistance.rawIds];return(T=n==null?void 0:n.equipEffects)==null||T.forEach(d=>{W.randomElementalResistances.rawIds.includes(d.id)?r+=d.values[0]*d.values[2]:s.includes(d.id)&&(r+=d.values[0])}),r};return(n,r)=>(t(),i("div",Ie,[l("table",Te,[(t(!0),i(V,null,F(D.value,s=>(t(),i(V,{key:`${u.item.id}-${s}`},[U(s)?I("",!0):(t(),i("tr",{key:0,class:j(["effect-line",{"with-comparison":m.value&&u.withComparisons}])},[m.value&&u.withComparisons?(t(),i(V,{key:0},[A.value[s]?(t(),i("td",{key:0,class:j(["equipped-item-effect",{"long-entry":A.value[s].longEntry}])},[l("div",We,[s==="304"?(t(),i("div",qe,[l("span",null,h(n.$t("tooltips.addsStateLevels",{num_0:A.value[s].values[2]})),1),x(X,{"state-id":`${A.value[s].values[0]}`,"current-level":A.value[s].values[2]},null,8,["state-id","current-level"])])):(t(),i("div",Me,h(a(A.value[s])),1))])],2)):(t(),i("td",Re))],64)):I("",!0),b.value[s]?(t(),i("td",Le,[l("div",De,[m.value&&u.withComparisons?(t(),i("div",{key:0,class:j(["change-icon mr-1",{decrease:f(s)<0,increase:f(s)>0}])},h(f(s)>0?"+":"")+h(f(s)),3)):I("",!0),s==="304"?(t(),i("div",Oe,[l("span",null,h(n.$t("tooltips.addsStateLevels",{num_0:b.value[s].values[2]})),1),x(X,{"state-id":`${b.value[s].values[0]}`,"current-level":b.value[s].values[2],inline:""},null,8,["state-id","current-level"])])):(t(),i("div",Be,h(a(b.value[s])),1))])])):u.withComparisons?(t(),i("td",{key:2,class:j(["new-item-effect removed",{"long-entry":A.value[s].longEntry}])},[l("div",Ve,[m.value&&u.withComparisons?(t(),i("div",{key:0,class:j(["change-icon mr-1",{decrease:f(s)<0,increase:f(s)>0}])},h(f(s)>0?"+":"")+h(f(s)),3)):I("",!0),s==="304"?(t(),i("div",je,[l("span",null,h(n.$t("tooltips.addsStateLevels",{num_0:A.value[s].values[2]})),1),x(X,{"state-id":`${A.value[s].values[0]}`,"current-level":A.value[s].values[2]},null,8,["state-id","current-level"])])):(t(),i("div",Ne,h(a(A.value[s])),1))])],2)):I("",!0)],2))],64))),128)),u.withTotals&&(m.value||g(u.item)>0||g(m.value)>0)?(t(),i("tr",Fe,[m.value&&u.withComparisons?(t(),i("td",Pe,[l("div",Ue,h(g(m.value))+" "+h(n.$t("tooltips.totalMastery")),1)])):I("",!0),l("td",He,[l("div",ze,[m.value?(t(),i("div",{key:0,class:j(["change-icon mr-1",{decrease:g(u.item)-g(m.value)<0,increase:g(u.item)-g(m.value)>0}])},h(g(u.item)-g(m.value)>0?"+":"")+h(g(u.item)-g(m.value)),3)):I("",!0),ce(" "+h(g(u.item))+" "+h(n.$t("tooltips.totalMastery")),1)])])])):I("",!0),u.withTotals&&(m.value||S(u.item)>0||S(m.value)>0)?(t(),i("tr",Ye,[m.value&&u.withComparisons?(t(),i("td",Ge,[l("div",Qe,h(S(m.value))+" "+h(n.$t("tooltips.totalResistance")),1)])):I("",!0),l("td",Ze,[l("div",Je,[m.value?(t(),i("div",{key:0,class:j(["change-icon mr-1",{decrease:S(u.item)-S(m.value)<0,increase:S(u.item)-S(m.value)>0}])},h(S(u.item)-S(m.value)>0?"+":"")+h(S(u.item)-S(m.value)),3)):I("",!0),ce(" "+h(S(u.item))+" "+h(n.$t("tooltips.totalResistance")),1)])])])):I("",!0)])]))}},re=se(Xe,[["__scopeId","data-v-63127289"]]);const ue=u=>(de("data-v-7dcc434c"),u=u(),me(),u),Ke=ue(()=>l("div",{class:"drag-bar"},null,-1)),et={class:"edit-item-modal-content flex flex-column pb-2"},tt={key:0,class:"header-area flex align-items-center px-3 pt-2 pb-1"},st={class:"flex flex-column mr-3"},lt={class:"item-name capitalize"},it=ue(()=>l("div",{class:"flex-grow-1"},null,-1)),at={key:1,class:"header-area flex px-3 pt-2 pb-1"},nt={class:"flex flex-column ml-1"},ut={class:"item-name mr-2 truncate",style:{"max-width":"15ch"}},ot={class:"flex"},ct={key:0},rt={key:1},dt=ue(()=>l("div",{class:"flex-grow-1"},null,-1)),mt={key:2,class:"random-mastery-section flex flex-column px-3"},vt={key:0,class:"text-center w-full text-lg mb-2 pt-2"},pt={key:0,class:"flex align-items-center"},ht={key:1},yt={class:"flex align-items-center py-1 px-2"},ft={class:"capitalize"},gt={key:3,class:"random-resistance-section flex flex-column px-3"},_t={key:0,class:"text-center w-full text-lg mb-2 pt-2"},kt={key:0,class:"flex align-items-center"},$t={key:1},xt={class:"flex align-items-center py-1 px-2"},wt={class:"capitalize"},bt={class:"flex justify-content-center mt-2"},St={__name:"EditEquipmentModal",emits:["change"],setup(u,{expose:L,emit:M}){const R=M;let m=ye();const b=ee("currentCharacter"),A=H(!1),D=H(!1),U=H(null),c=H([]),a=H(null),v=H({}),f=[{value:"empty",label:"characterSheet.equipmentContent.itemFilters.none",icon:"empty_coin"},{value:"water",label:"characterSheet.statsDisplay.water",icon:"water_coin"},{value:"earth",label:"characterSheet.statsDisplay.earth",icon:"earth_coin"},{value:"air",label:"characterSheet.statsDisplay.air",icon:"air_coin"},{value:"fire",label:"characterSheet.statsDisplay.fire",icon:"fire_coin"}],g=Y(()=>{var o,e;return(e=(o=a.value)==null?void 0:o.equipEffects)==null?void 0:e.find(y=>y.id===1068)}),S=Y(()=>{var o,e;return(e=(o=a.value)==null?void 0:o.equipEffects)==null?void 0:e.find(y=>y.id===1069)});fe.on(ge.UPDATE_RAND_ELEM_SELECTORS,()=>{n(),r()});const n=()=>{A.value&&(D.value&&U.value==="mastery"?(v.value.masterySlot1=f.find(o=>o.value===c.value[0]),v.value.masterySlot2=f.find(o=>o.value===c.value[1]),v.value.masterySlot3=f.find(o=>o.value===c.value[2]),v.value.masterySlot4=f.find(o=>o.value===c.value[3])):g.value!==void 0&&(v.value.masterySlot1=f.find(o=>{var e;return o.value===((e=g.value.masterySlot1)==null?void 0:e.type)}),v.value.masterySlot2=f.find(o=>{var e;return o.value===((e=g.value.masterySlot2)==null?void 0:e.type)}),v.value.masterySlot3=f.find(o=>{var e;return o.value===((e=g.value.masterySlot3)==null?void 0:e.type)})))},r=()=>{A.value&&(D.value&&U.value==="resistance"?(v.value.resistanceSlot1=f.find(o=>o.value===c.value[0]),v.value.resistanceSlot2=f.find(o=>o.value===c.value[1]),v.value.resistanceSlot3=f.find(o=>o.value===c.value[2]),v.value.resistanceSlot4=f.find(o=>o.value===c.value[3])):S.value!==void 0&&(v.value.resistanceSlot1=f.find(o=>{var e,y;return o.value===((y=(e=S.value)==null?void 0:e.resistanceSlot1)==null?void 0:y.type)}),v.value.resistanceSlot2=f.find(o=>{var e,y;return o.value===((y=(e=S.value)==null?void 0:e.resistanceSlot2)==null?void 0:y.type)}),v.value.resistanceSlot3=f.find(o=>{var e,y;return o.value===((y=(e=S.value)==null?void 0:e.resistanceSlot3)==null?void 0:y.type)})))},s=(o,e)=>{var C,p;let y=(p=(C=a.value)==null?void 0:C.equipEffects)==null?void 0:p.find(_=>_.id===1068);if(y[e]={type:v.value[e].value,value:g.value.values[0]},Object.keys(y).forEach(_=>{var k;_!==e&&((k=y[_])==null?void 0:k.type)===v.value[e].value&&(y[_]={type:f[0].value,value:[]},v.value[_]=f[0])}),D.value){let _=[];Object.keys(y).forEach(k=>{var $;($=y[k])!=null&&$.type&&_.push(y[k].type)}),c.value=_,R("change",{type:"mastery",value:_})}},T=(o,e)=>{var C,p;let y=(p=(C=a.value)==null?void 0:C.equipEffects)==null?void 0:p.find(_=>_.id===1069);if(y[e]={type:v.value[e].value,value:S.value.values[0]},Object.keys(y).forEach(_=>{var k;_!==e&&((k=y[_])==null?void 0:k.type)===v.value[e].value&&(y[_]={type:f[0].value,value:[]},v.value[_]=f[0])}),D.value){let _=[];Object.keys(y).forEach(k=>{var $;($=y[k])!=null&&$.type&&_.push(y[k].type)}),c.value=_,R("change",{type:"resistance",value:_})}},d=()=>{Object.keys(b.value.equipment).forEach(o=>{b.value.equipment[o].item!==null&&b.value.equipment[o].item.equipEffects&&b.value.equipment[o].item.equipEffects.forEach(e=>{var y,C,p,_,k,$;e.id===1068&&g.value&&(e.values[2]>=1&&(e.masterySlot1={type:((y=v.value.masterySlot1)==null?void 0:y.value)||"empty",value:e.values[0]}),e.values[2]>=2&&(e.masterySlot2={type:((C=v.value.masterySlot2)==null?void 0:C.value)||"empty",value:e.values[0]}),e.values[2]>=3&&(e.masterySlot3={type:((p=v.value.masterySlot3)==null?void 0:p.value)||"empty",value:e.values[0]})),e.id===1069&&S.value&&(e.values[2]>=1&&(e.resistanceSlot1={type:((_=v.value.resistanceSlot1)==null?void 0:_.value)||"empty",value:e.values[0]}),e.values[2]>=2&&(e.resistanceSlot2={type:((k=v.value.resistanceSlot2)==null?void 0:k.value)||"empty",value:e.values[0]}),e.values[2]>=3&&(e.resistanceSlot3={type:(($=v.value.resistanceSlot3)==null?void 0:$.value)||"empty",value:e.values[0]}))})})},E=(o,e,y)=>{D.value=!1,a.value=b.value.equipment[o].item,A.value=!0,ae(()=>{let C=document.getElementById(m);C.style.position="fixed",C.style.left=`${e}px`,C.style.top=`${y}px`,n(),r()})},w=(o,e,y,C)=>{D.value=!0,c.value=o,U.value=e,A.value=!0,a.value={equipEffects:[]},e==="mastery"?a.value.equipEffects.push({id:1068,values:[-1,0,4],masterySlot1:{type:c.value[0]},masterySlot2:{type:c.value[1]},masterySlot3:{type:c.value[2]},masterySlot4:{type:c.value[3]}}):a.value.equipEffects.push({id:1069,values:[-1,0,4],resistanceSlot1:{type:c.value[0]},resistanceSlot2:{type:c.value[1]},resistanceSlot3:{type:c.value[2]},resistanceSlot4:{type:c.value[3]}}),ae(()=>{let p=document.getElementById(m);p.style.position="fixed",p.style.left=`${y}px`,p.style.top=`${C}px`,n(),r()})},N=()=>{A.value=!1};return L({open:E,openForDefaults:w}),(o,e)=>{const y=z("p-button"),C=z("p-image"),p=z("p-dropdown"),_=z("p-dialog");return t(),O(_,{id:B(m),visible:A.value,"onUpdate:visible":e[0]||(e[0]=k=>A.value=k)},{header:q(()=>[Ke]),default:q(()=>[l("div",et,[D.value?(t(),i("div",tt,[l("div",st,[l("div",lt,"Default Random "+h(U.value),1)]),it,x(y,{class:"close-button px-1 py-1",icon:"mdi mdi-close-thick",onClick:N})])):(t(),i("div",at,[x(C,{src:`https://tmktahu.github.io/WakfuAssets/items/${a.value.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),l("div",nt,[l("div",ut,h(a.value.name),1),l("div",ot,[x(C,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${a.value.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),x(C,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${a.value.type.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),B(te).includes(a.value.type.id)?(t(),i("div",ct,"Item Level: "+h(a.value.id===12237?"25":"50"),1)):(t(),i("div",rt,"Level: "+h(a.value.level),1))])]),dt,x(y,{class:"close-button px-1 py-1",icon:"mdi mdi-close-thick",onClick:N})])),g.value?(t(),i("div",mt,[D.value?I("",!0):(t(),i("div",vt,h(o.$t("characterSheet.equipmentContent.masteryAssignment",{num:g.value.values[0]})),1)),l("div",{class:j(["flex justify-content-center gap-2 px-3",{"mt-3":D.value}])},[(t(!0),i(V,null,F(g.value.values[2],k=>(t(),O(p,{key:k,modelValue:v.value["masterySlot"+k],"onUpdate:modelValue":$=>v.value["masterySlot"+k]=$,class:"mastery-dropdown","option-label":"label",options:f,onChange:$=>s($,"masterySlot"+k)},{value:q($=>[$.value?(t(),i("div",pt,[x(C,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${$.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(t(),i("span",ht,[x(C,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:q($=>[l("div",yt,[l("div",ft,h(o.$t($.option.label)),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))),128))],2)])):I("",!0),S.value?(t(),i("div",gt,[D.value?I("",!0):(t(),i("div",_t,h(o.$t("characterSheet.equipmentContent.resistanceAssignment",{num:S.value.values[0]})),1)),l("div",{class:j(["flex justify-content-center gap-2 px-3",{"mt-3":D.value}])},[(t(!0),i(V,null,F(S.value.values[2],k=>(t(),O(p,{key:k,modelValue:v.value["resistanceSlot"+k],"onUpdate:modelValue":$=>v.value["resistanceSlot"+k]=$,class:"mastery-dropdown",options:f,"option-label":"label",onChange:$=>T($,"resistanceSlot"+k)},{value:q($=>[$.value?(t(),i("div",kt,[x(C,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${$.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(t(),i("span",$t,[x(C,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:q($=>[l("div",xt,[l("div",wt,h(o.$t($.option.label)),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))),128))],2)])):I("",!0),l("div",bt,[x(y,{class:"py-2",label:o.$t("characterSheet.equipmentContent.applyToAllItems"),onClick:d},null,8,["label"])])])]),_:1},8,["id","visible"])}}},Et=se(St,[["__scopeId","data-v-7dcc434c"]]);const G=u=>(de("data-v-63545e19"),u=u(),me(),u),At={class:"flex equipment-slots-wrapper"},Ct={key:0,class:"flex flex-column h-full",style:{"max-height":"60px"}},It={class:"simple-tooltip"},Tt=G(()=>l("div",{class:"flex-grow-1"},null,-1)),Wt={class:"simple-tooltip"},qt={key:0},Mt={class:"flex align-items-center justify-content-center w-full",style:{position:"relative"}},Rt={key:0,class:"random-stat-icons-wrapper"},Lt={key:1,class:"random-stat-icons-wrapper"},Dt={key:0,class:"item-card-tooltip"},Ot={class:"effect-header flex pt-2 px-1"},Bt={class:"flex flex-column"},Vt={class:"item-name mr-2"},jt={class:"flex"},Nt={key:0,class:"white-space-nowrap"},Ft={key:1,class:"white-space-nowrap"},Pt=G(()=>l("div",{class:"flex-grow-1"},null,-1)),Ut={class:"flex"},Ht=G(()=>l("div",{class:"simple-tooltip"},"Open Encyclopedia Page",-1)),zt={key:1,class:"flex align-items-center justify-content-center"},Yt={class:"flex align-items-center justify-content-center"},Gt=G(()=>l("div",{class:"hover-icon search"},[l("i",{class:"pi pi-search"})],-1)),Qt={class:"flex align-items-center justify-content-center w-full",style:{position:"relative"}},Zt=["onClick"],Jt=G(()=>l("i",{class:"pi pi-pencil"},null,-1)),Xt=[Jt],Kt=["onClick"],es=G(()=>l("i",{class:"pi pi-trash"},null,-1)),ts=[es],ss={key:0,class:"random-stat-icons-wrapper"},ls={key:1,class:"random-stat-icons-wrapper"},is={key:0,class:"item-card-tooltip"},as={class:"effect-header flex gap-1 pt-2 px-1"},ns={class:"flex flex-column"},us={class:"item-name mr-2"},os={class:"flex"},cs={key:0},rs={key:1},ds=G(()=>l("div",{class:"flex-grow-1"},null,-1)),ms={class:"flex"},vs=G(()=>l("div",{class:"simple-tooltip"},"Open Encyclopedia Page",-1)),ps={__name:"EquipmentButtons",props:{character:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1},withTotals:{type:Boolean,default:!1},withDefaultElemSelector:{type:Boolean,default:!1}},setup(u){const{t:L}=ne();let M=u;const R=_e(),{getItemEncyclopediaUrl:m}=xe(),b=ee("itemFilters"),A=H(null),D=Y(()=>{let d=c.value.equipment[P.FIRST_WEAPON.id].item;return d?!!d.type.disabledSlots.includes(P.SECOND_WEAPON.id):!1}),U=ee("masterData"),c=H(M.character),a=H({});ke(U,$e.debounce(()=>{ae(()=>{var d;c.value=M.character,a.value=(d=c.value)==null?void 0:d.equipment})},100),{immediate:!0});const v=d=>{b.itemTypeFilters.forEach(E=>{E.validSlots.includes(P[d])?E.checked=!0:E.checked=!1})},f=(d,E,w)=>{A.value.open(E,w.target.getBoundingClientRect().left-200,w.target.getBoundingClientRect().bottom+10)},g=(d,E,w)=>{A.value.openForDefaults(d,E,w.target.getBoundingClientRect().left-200,w.target.getBoundingClientRect().bottom+10)},S=({type:d,value:E})=>{d==="mastery"?le.value=E:ie.value=E},n=(d,E)=>{R.require({group:"popup",target:E.currentTarget,message:L("confirms.areYouSure"),accept:()=>{c.value.equipment[d].item=null}})},r=d=>{var E,w;return((w=(E=c.value.equipment[d].item)==null?void 0:E.equipEffects)==null?void 0:w.find(N=>N.id===1068))||null},s=d=>{var E,w;return((w=(E=c.value.equipment[d].item)==null?void 0:E.equipEffects)==null?void 0:w.find(N=>N.id===1069))||null},T=d=>{let E=m(d);window.open(E,"_blank")};return(d,E)=>{const w=z("p-image"),N=z("tippy"),o=z("p-button");return t(),i("div",At,[u.withDefaultElemSelector?(t(),i("div",Ct,[l("div",null,[x(N,null,{content:q(()=>[l("div",It,h(d.$t("characterSheet.equipmentContent.randomMasteryDefaults")),1)]),default:q(()=>[l("div",{class:"random-defaults-button flex align-items-center justify-content-center w-full",onClick:E[0]||(E[0]=e=>g(B(le),"mastery",e))},[(t(!0),i(V,null,F(B(le),e=>(t(),O(w,{key:e,src:`https://tmktahu.github.io/WakfuAssets/statistics/${e}_coin.png`,"image-style":"width: 24px"},null,8,["src"]))),128))])]),_:1})]),Tt,l("div",null,[x(N,{placement:"bottom",duration:"0"},{content:q(()=>[l("div",Wt,h(d.$t("characterSheet.equipmentContent.randomResistanceDefaults")),1)]),default:q(()=>[l("div",{class:"random-defaults-button flex align-items-center justify-content-center w-full",onClick:E[1]||(E[1]=e=>g(B(ie),"resistance",e))},[(t(!0),i(V,null,F(B(ie),e=>(t(),O(w,{key:e,src:`https://tmktahu.github.io/WakfuAssets/statistics/${e}_coin.png`,"image-style":"width: 24px"},null,8,["src"]))),128))])]),_:1})])])):I("",!0),(t(!0),i(V,null,F(B(P),(e,y,C)=>(t(),i(V,{key:e.id},[u.readOnly?(t(),i("div",{key:0,class:j(["equipment-display",{"has-item":a.value[e.id]&&a.value[e.id].item!==null}])},[a.value[e.id]&&a.value[e.id].item?(t(),i("div",qt,[x(X,{placement:"bottom",duration:"0",inline:""},{trigger:q(()=>[l("div",{class:j(["equipment-button",{"has-item":a.value[e.id].item!==null}])},[l("div",Mt,[x(w,{class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${a.value[e.id].item.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),r(e.id)!==null?(t(),i("div",Rt,[(t(!0),i(V,null,F(r(e.id).values[2],p=>(t(),O(w,{key:p,src:`https://tmktahu.github.io/WakfuAssets/statistics/${r(e.id)[`masterySlot${p}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):I("",!0),s(e.id)!==null?(t(),i("div",Lt,[(t(!0),i(V,null,F(s(e.id).values[2],p=>(t(),O(w,{key:p,src:`https://tmktahu.github.io/WakfuAssets/statistics/${s(e.id)[`resistanceSlot${p}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):I("",!0)])],2)]),content:q(()=>{var p,_,k,$,Q,Z,J;return[a.value[e.id].item?(t(),i("div",Dt,[x(re,{item:a.value[e.id].item,"with-totals":u.withTotals},null,8,["item","with-totals"]),l("div",Ot,[x(w,{src:`https://tmktahu.github.io/WakfuAssets/items/${(p=a.value[e.id].item)==null?void 0:p.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),l("div",Bt,[l("div",Vt,h(d.$t(`items.${a.value[e.id].item.id}`)),1),l("div",jt,[x(w,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${(_=a.value[e.id].item)==null?void 0:_.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),x(w,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${($=(k=a.value[e.id].item)==null?void 0:k.type)==null?void 0:$.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),B(te).includes((Z=(Q=a.value[e.id].item)==null?void 0:Q.type)==null?void 0:Z.id)?(t(),i("div",Nt," Item Level: "+h(a.value[e.id].item.id===12237?"25":"50"),1)):(t(),i("div",Ft,"Level: "+h((J=a.value[e.id].item)==null?void 0:J.level),1))])]),Pt,l("div",Ut,[x(N,{placement:"left"},{content:q(()=>[Ht]),default:q(()=>[x(o,{icon:"pi pi-question-circle",class:"equip-button",onClick:ve=>T(a.value[e.id].item)},null,8,["onClick"])]),_:2},1024)])])])):I("",!0)]}),_:2},1024)])):(t(),i("div",zt,[x(w,{src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${e.id}.png`,"image-style":"width: 60px"},null,8,["src"])]))],2)):(t(),i(V,{key:1},[!a.value[e.id]||a.value[e.id].item===null?(t(),O(o,{key:0,class:"equipment-button",onClick:p=>v(e.id)},{default:q(()=>{var p;return[l("div",Yt,[Gt,e.id===B(P).SECOND_WEAPON.id&&D.value?(t(),O(w,{key:0,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${(p=a.value[B(P).FIRST_WEAPON.id])==null?void 0:p.item.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])):(t(),O(w,{key:1,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${e.id}.png`,"image-style":"width: 60px"},null,8,["src"]))])]}),_:2},1032,["onClick"])):(t(),O(X,{key:1,placement:"bottom",duration:"0",inline:""},{trigger:q(()=>[l("div",{class:j(["equipment-button",{"has-item":a.value[e.id].item!==null}])},[l("div",Qt,[l("div",{class:"hover-icon edit",onClick:p=>f(C,e.id,p)},Xt,8,Zt),l("div",{class:"hover-icon remove",onClick:p=>n(e.id,p)},ts,8,Kt),x(w,{class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${a.value[e.id].item.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),r(e.id)!==null?(t(),i("div",ss,[(t(!0),i(V,null,F(r(e.id).values[2],p=>(t(),O(w,{key:p,src:`https://tmktahu.github.io/WakfuAssets/statistics/${r(e.id)[`masterySlot${p}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):I("",!0),s(e.id)!==null?(t(),i("div",ls,[(t(!0),i(V,null,F(s(e.id).values[2],p=>(t(),O(w,{key:p,src:`https://tmktahu.github.io/WakfuAssets/statistics/${s(e.id)[`resistanceSlot${p}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):I("",!0)])],2)]),content:q(()=>{var p,_,k,$,Q,Z,J;return[a.value[e.id].item?(t(),i("div",is,[x(re,{item:a.value[e.id].item,"with-totals":u.withTotals},null,8,["item","with-totals"]),l("div",as,[x(w,{src:`https://tmktahu.github.io/WakfuAssets/items/${(p=a.value[e.id].item)==null?void 0:p.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),l("div",ns,[l("div",us,h(d.$t(`items.${a.value[e.id].item.id}`)),1),l("div",os,[x(w,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${(_=a.value[e.id].item)==null?void 0:_.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),x(w,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${($=(k=a.value[e.id].item)==null?void 0:k.type)==null?void 0:$.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),B(te).includes((Z=(Q=a.value[e.id].item)==null?void 0:Q.type)==null?void 0:Z.id)?(t(),i("div",cs,"Item Level: "+h(a.value[e.id].item.id===12237?"25":"50"),1)):(t(),i("div",rs,"Level: "+h((J=a.value[e.id].item)==null?void 0:J.level),1))])]),ds,l("div",ms,[x(N,{placement:"left"},{content:q(()=>[vs]),default:q(()=>[x(o,{icon:"pi pi-question-circle",class:"equip-button",onClick:ve=>T(a.value[e.id].item)},null,8,["onClick"])]),_:2},1024)])])])):I("",!0)]}),_:2},1024))],64))],64))),128)),x(Et,{ref_key:"editEquipmentModal",ref:A,onChange:S},null,512)])}}},ys=se(ps,[["__scopeId","data-v-63545e19"]]),fs="/assets/addCompanion-b3d0cb0d.png";export{ys as E,re as I,X as M,fs as a,xe as u};
