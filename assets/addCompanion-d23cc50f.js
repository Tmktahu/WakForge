import{L as P,_ as se,b as ne,f as Y,a0 as pe,r as H,g as z,o as t,n as O,w as q,j as s,A as j,a1 as oe,t as h,q as V,Z as K,h as i,l as I,F as B,m as F,E as he,i as ee,k as x,J as ce,N as te,I as W,v as ye,a2 as fe,a3 as ge,O as ae,s as de,x as me,a as _e,y as ke,H as $e,a4 as le,a5 as ie}from"./index-04198f2f.js";const xe=()=>{const u=M=>{let R=L(M),m="https://www.wakfu.com/en/mmorpg/encyclopedia",b="";return M.type.validSlots.includes(P.FIRST_WEAPON.id)||M.type.validSlots.includes(P.SECOND_WEAPON.id)?b=`${m}/weapons/${R}`:M.type.validSlots.includes(P.PET.id)?b=`${m}/pets/${R}`:M.type.validSlots.includes(P.MOUNT.id)?b=`${m}/mounts/${R}`:M.type.validSlots.includes(P.ACCESSORY.id)?b=`${m}/accessories/${R}`:b=`${m}/armors/${R}`,b},L=M=>{let R=M.id,m=M.name.toLowerCase().replace(" ","-");return`${R}-${m}`};return{getItemEncyclopediaUrl:u}};const we={class:"inline-tooltip-trigger",style:{width:"fit-content"}},be={class:"state-title py-2 px-2"},Se={key:0,class:"px-2 py-1",style:{background:"var(--error-50)","white-space":"break-line","max-width":"45ch"}},Ee={class:"state-description"},Ce={class:"flex flex-column"},Ae=["innerHTML"],Ie={__name:"MultiTooltip",props:{stateId:{type:String,default:""},currentLevel:{type:Number,default:1},sticky:{type:Boolean,default:!1}},setup(u){const L=u,{t:M}=ne(),R=Y(()=>pe.find(c=>c.id===L.stateId));let m=null;const b=H(0),E=c=>{c.isVisible&&b.value===0?m=setInterval(D,10):(clearInterval(m),b.value=0)},D=()=>{b.value++,b.value===100&&clearInterval(m)},U=c=>{var a,v,f,g,S;return`${c.indented?'<i class="mdi mdi-arrow-right-bottom" style="margin-top: -2px; margin-right: 4px;"></i>':""}${M(`states.${c.text}`,{img_fire:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/FIRE.png" /></div>',img_earth:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/EARTH.png" /></div>',img_water:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/WATER.png" /></div>',img_air:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/AIR.png" /></div>',img_physical:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/PHYSICAL.png" /></div>',img_light:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/LIGHT.png" /></div>',img_ecnbi:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/ecnbi.png" /></div>',img_ecnbr:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/ecnbr.png" /></div>',img_ally:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/ally.png" /></div>',img_enemy:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/enemy.png" /></div>',img_circling:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/CIRCLERING.png" /></div>',num_0:`${(a=c.num_0)==null?void 0:a[`level_${L.currentLevel}`]}`,num_1:`${(v=c.num_1)==null?void 0:v[`level_${L.currentLevel}`]}`,num_2:`${(f=c.num_2)==null?void 0:f[`level_${L.currentLevel}`]}`,num_3:`${(g=c.num_3)==null?void 0:g[`level_${L.currentLevel}`]}`,num_4:`${(S=c.num_4)==null?void 0:S[`level_${L.currentLevel}`]}`})}`};return(c,a)=>{const v=z("p-progressBar"),f=z("tippy");return t(),O(f,he({duration:"0","max-width":"fit-content",interactive:b.value===100||!u.sticky,"interactive-border":u.sticky?2e3:20},c.$attrs,{onState:E}),{content:q(()=>[s("div",{class:j(["multi-tooltip",{stuck:b.value===100&&u.sticky}])},[oe(c.$slots,"content",{},()=>{var g,S;return[s("div",be,[s("span",null,h(c.$t("tooltips.stateAtLevel",{state:c.$t(`states.${(g=R.value)==null?void 0:g.name}`),num_0:Math.min(V(K)[u.stateId],u.currentLevel)||u.currentLevel,num_1:V(K)[u.stateId]===void 0?"??":V(K)[u.stateId]})),1)]),u.stateId&&V(K)[u.stateId]===void 0?(t(),i("div",Se,h(c.$t("tooltips.missingInfoAboutState")),1)):I("",!0),s("div",Ee,[s("div",Ce,[(t(!0),i(B,null,F((S=R.value)==null?void 0:S.descriptionData,n=>(t(),i("div",{key:n.text,class:j([{"pl-3":n.indented,"px-2":!n.indented,indented:n.indented},"description-line py-1"]),innerHTML:U(n)},null,10,Ae))),128))])])]},!0),u.sticky?(t(),O(v,{key:0,value:b.value,pt:{value:{style:{transition:"none"}}}},null,8,["value"])):I("",!0)],2)]),default:q(()=>[oe(c.$slots,"trigger",{},()=>{var g;return[s("div",we,h(c.$t(`states.${(g=R.value)==null?void 0:g.name}`)),1)]},!0)]),_:3},16,["interactive","interactive-border"])}}},X=se(Ie,[["__scopeId","data-v-ae35f944"]]);const Te={class:"flex flex-column"},We={class:"effect-list-wrapper flex-grow-1",style:{"border-spacing":"0"}},qe={class:"flex align-items-center w-full px-1 py-1"},Me={key:0,class:"effect-text flex align-items-center"},Re={key:1,class:"effect-text"},Le={key:1,class:"equipped-item-effect",style:{"min-width":"50px"}},De={key:1,class:"new-item-effect"},Oe={class:"flex align-items-center w-full px-1 py-1"},Ve={key:1,class:"flex align-items-center"},Be={key:2},je={class:"flex align-items-center w-full px-1 py-1"},Ne={key:1,class:"effect-text flex align-items-center"},Fe={key:2,class:"effect-text"},Pe={key:0,class:"effect-line totals"},Ue={key:0,class:"equipped-item-effect",style:{"border-top":"3px solid var(--secondary-70)"}},He={class:"flex align-items-center w-full px-1 py-1"},ze={class:"new-item-effect",style:{"border-top":"3px solid var(--primary-70)"}},Ye={class:"flex align-items-center w-full px-1 py-1"},Ge={key:1,class:"effect-line totals"},Je={key:0,class:"equipped-item-effect",style:{"border-top":"3px solid var(--secondary-70)"}},Ze={class:"flex align-items-center w-full px-1 py-1"},Qe={class:"new-item-effect"},Xe={class:"flex align-items-center w-full px-1 py-1",style:{"border-top":"3px solid var(--primary-70)"}},Ke={__name:"ItemStatList",props:{item:{type:Object,default:()=>{}},cardMode:{type:Boolean,default:!1},withComparisons:{type:Boolean,default:!1},withTotals:{type:Boolean,default:!1}},setup(u){let L=u;const{t:M}=ne(),R=ee("currentCharacter"),m=Y(()=>{var l,T,d;let r=L.item.type.validSlots[0];return r&&R.value&&((T=(l=R.value.equipment[r])==null?void 0:l.item)==null?void 0:T.id)!==((d=L.item)==null?void 0:d.id)?R.value.equipment[r].item:null}),b=Y(()=>{var r,l;let n={};return(l=(r=L.item)==null?void 0:r.equipEffects)==null||l.forEach(T=>{n[T.id]=T}),n}),E=Y(()=>{var r,l;let n={};return(l=(r=m.value)==null?void 0:r.equipEffects)==null||l.forEach(T=>{n[T.id]=T}),n}),D=Y(()=>[...Object.keys(b.value),...Object.keys(E.value)].filter((n,r,l)=>l.indexOf(n)===r)),U=n=>!!["400","1020"].includes(n),c=n=>{let r=Object.keys(W).find(l=>W[l].rawIds.includes(n));return r===void 0?null:W[r]},a=n=>{if(n.id===1068)return M("tooltips.randomMasteryValue",{num_0:n.values[0],num_1:n.values[2]});if(n.id===1069)return M("tooltips.randomResistanceValue",{num_0:n.values[0],num_1:n.values[2]});{let r=v(n),l=M(c(n.id).text);return`${r>0?"+":""}${r}${l.charAt(0)==="%"?"":" "}${l}`}},v=n=>{let r=n.values[0],l=0;return te.includes(L.item.type.id)?L.item.id===12237?l=r+25*n.values[1]:l=r+50*n.values[1]:l=r,Math.floor(l)},f=n=>{let r=0,l=b.value[n];l&&(r=v(l));let T=0,d=E.value[n];return d&&(T=v(d)),r-T},g=n=>{var T;let r=0,l=[...W.elementalMastery.rawIds,...W.fireMastery.rawIds,...W.earthMastery.rawIds,...W.waterMastery.rawIds,...W.airMastery.rawIds,...W.rearMastery.rawIds,...W.meleeMastery.rawIds,...W.distanceMastery.rawIds,...W.berserkMastery.rawIds,...W.criticalMastery.rawIds,...W.randomElementalMasteries.rawIds];return(T=n==null?void 0:n.equipEffects)==null||T.forEach(d=>{l.includes(d.id)&&(r+=d.values[0])}),r},S=n=>{var T;let r=0,l=[...W.rearResistance.rawIds,...W.elementalResistance.rawIds,...W.fireResistance.rawIds,...W.waterResistance.rawIds,...W.earthResistance.rawIds,...W.airResistance.rawIds,...W.criticalResistance.rawIds];return(T=n==null?void 0:n.equipEffects)==null||T.forEach(d=>{W.randomElementalResistances.rawIds.includes(d.id)?r+=d.values[0]*d.values[2]:l.includes(d.id)&&(r+=d.values[0])}),r};return(n,r)=>(t(),i("div",Te,[s("table",We,[(t(!0),i(B,null,F(D.value,l=>(t(),i(B,{key:`${u.item.id}-${l}`},[U(l)?I("",!0):(t(),i("tr",{key:0,class:j(["effect-line",{"with-comparison":m.value&&u.withComparisons}])},[m.value&&u.withComparisons?(t(),i(B,{key:0},[E.value[l]?(t(),i("td",{key:0,class:j(["equipped-item-effect",{"long-entry":E.value[l].longEntry}])},[s("div",qe,[l==="304"?(t(),i("div",Me,[s("span",null,h(n.$t("tooltips.addsStateLevels",{num_0:E.value[l].values[2]})),1),x(X,{"state-id":`${E.value[l].values[0]}`,"current-level":E.value[l].values[2]},null,8,["state-id","current-level"])])):(t(),i("div",Re,h(a(E.value[l])),1))])],2)):(t(),i("td",Le))],64)):I("",!0),b.value[l]?(t(),i("td",De,[s("div",Oe,[m.value&&u.withComparisons?(t(),i("div",{key:0,class:j(["change-icon mr-1",{decrease:f(l)<0,increase:f(l)>0}])},h(f(l)>0?"+":"")+h(f(l)),3)):I("",!0),l==="304"?(t(),i("div",Ve,[s("span",null,h(n.$t("tooltips.addsStateLevels",{num_0:b.value[l].values[2]})),1),x(X,{"state-id":`${b.value[l].values[0]}`,"current-level":b.value[l].values[2]},null,8,["state-id","current-level"])])):(t(),i("div",Be,h(a(b.value[l])),1))])])):u.withComparisons?(t(),i("td",{key:2,class:j(["new-item-effect removed",{"long-entry":E.value[l].longEntry}])},[s("div",je,[m.value&&u.withComparisons?(t(),i("div",{key:0,class:j(["change-icon mr-1",{decrease:f(l)<0,increase:f(l)>0}])},h(f(l)>0?"+":"")+h(f(l)),3)):I("",!0),l==="304"?(t(),i("div",Ne,[s("span",null,h(n.$t("tooltips.addsStateLevels",{num_0:E.value[l].values[2]})),1),x(X,{"state-id":`${E.value[l].values[0]}`,"current-level":E.value[l].values[2]},null,8,["state-id","current-level"])])):(t(),i("div",Fe,h(a(E.value[l])),1))])],2)):I("",!0)],2))],64))),128)),u.withTotals&&(m.value||g(u.item)>0||g(m.value)>0)?(t(),i("tr",Pe,[m.value&&u.withComparisons?(t(),i("td",Ue,[s("div",He,h(g(m.value))+" "+h(n.$t("tooltips.totalMastery")),1)])):I("",!0),s("td",ze,[s("div",Ye,[m.value?(t(),i("div",{key:0,class:j(["change-icon mr-1",{decrease:g(u.item)-g(m.value)<0,increase:g(u.item)-g(m.value)>0}])},h(g(u.item)-g(m.value)>0?"+":"")+h(g(u.item)-g(m.value)),3)):I("",!0),ce(" "+h(g(u.item))+" "+h(n.$t("tooltips.totalMastery")),1)])])])):I("",!0),u.withTotals&&(m.value||S(u.item)>0||S(m.value)>0)?(t(),i("tr",Ge,[m.value&&u.withComparisons?(t(),i("td",Je,[s("div",Ze,h(S(m.value))+" "+h(n.$t("tooltips.totalResistance")),1)])):I("",!0),s("td",Qe,[s("div",Xe,[m.value?(t(),i("div",{key:0,class:j(["change-icon mr-1",{decrease:S(u.item)-S(m.value)<0,increase:S(u.item)-S(m.value)>0}])},h(S(u.item)-S(m.value)>0?"+":"")+h(S(u.item)-S(m.value)),3)):I("",!0),ce(" "+h(S(u.item))+" "+h(n.$t("tooltips.totalResistance")),1)])])])):I("",!0)])]))}},re=se(Ke,[["__scopeId","data-v-02db0c05"]]);const ue=u=>(de("data-v-7dcc434c"),u=u(),me(),u),et=ue(()=>s("div",{class:"drag-bar"},null,-1)),tt={class:"edit-item-modal-content flex flex-column pb-2"},st={key:0,class:"header-area flex align-items-center px-3 pt-2 pb-1"},lt={class:"flex flex-column mr-3"},it={class:"item-name capitalize"},at=ue(()=>s("div",{class:"flex-grow-1"},null,-1)),nt={key:1,class:"header-area flex px-3 pt-2 pb-1"},ut={class:"flex flex-column ml-1"},ot={class:"item-name mr-2 truncate",style:{"max-width":"15ch"}},ct={class:"flex"},rt={key:0},dt={key:1},mt=ue(()=>s("div",{class:"flex-grow-1"},null,-1)),vt={key:2,class:"random-mastery-section flex flex-column px-3"},pt={key:0,class:"text-center w-full text-lg mb-2 pt-2"},ht={key:0,class:"flex align-items-center"},yt={key:1},ft={class:"flex align-items-center py-1 px-2"},gt={class:"capitalize"},_t={key:3,class:"random-resistance-section flex flex-column px-3"},kt={key:0,class:"text-center w-full text-lg mb-2 pt-2"},$t={key:0,class:"flex align-items-center"},xt={key:1},wt={class:"flex align-items-center py-1 px-2"},bt={class:"capitalize"},St={class:"flex justify-content-center mt-2"},Et={__name:"EditEquipmentModal",emits:["change"],setup(u,{expose:L,emit:M}){const R=M;let m=ye();const b=ee("currentCharacter"),E=H(!1),D=H(!1),U=H(null),c=H([]),a=H(null),v=H({}),f=[{value:"empty",label:"characterSheet.equipmentContent.itemFilters.none",icon:"empty_coin"},{value:"water",label:"characterSheet.statsDisplay.water",icon:"water_coin"},{value:"earth",label:"characterSheet.statsDisplay.earth",icon:"earth_coin"},{value:"air",label:"characterSheet.statsDisplay.air",icon:"air_coin"},{value:"fire",label:"characterSheet.statsDisplay.fire",icon:"fire_coin"}],g=Y(()=>{var o,e;return(e=(o=a.value)==null?void 0:o.equipEffects)==null?void 0:e.find(y=>y.id===1068)}),S=Y(()=>{var o,e;return(e=(o=a.value)==null?void 0:o.equipEffects)==null?void 0:e.find(y=>y.id===1069)});fe.on(ge.UPDATE_RAND_ELEM_SELECTORS,()=>{n(),r()});const n=()=>{E.value&&(D.value&&U.value==="mastery"?(v.value.masterySlot1=f.find(o=>o.value===c.value[0]),v.value.masterySlot2=f.find(o=>o.value===c.value[1]),v.value.masterySlot3=f.find(o=>o.value===c.value[2]),v.value.masterySlot4=f.find(o=>o.value===c.value[3])):g.value!==void 0&&(v.value.masterySlot1=f.find(o=>{var e;return o.value===((e=g.value.masterySlot1)==null?void 0:e.type)}),v.value.masterySlot2=f.find(o=>{var e;return o.value===((e=g.value.masterySlot2)==null?void 0:e.type)}),v.value.masterySlot3=f.find(o=>{var e;return o.value===((e=g.value.masterySlot3)==null?void 0:e.type)})))},r=()=>{E.value&&(D.value&&U.value==="resistance"?(v.value.resistanceSlot1=f.find(o=>o.value===c.value[0]),v.value.resistanceSlot2=f.find(o=>o.value===c.value[1]),v.value.resistanceSlot3=f.find(o=>o.value===c.value[2]),v.value.resistanceSlot4=f.find(o=>o.value===c.value[3])):S.value!==void 0&&(v.value.resistanceSlot1=f.find(o=>{var e,y;return o.value===((y=(e=S.value)==null?void 0:e.resistanceSlot1)==null?void 0:y.type)}),v.value.resistanceSlot2=f.find(o=>{var e,y;return o.value===((y=(e=S.value)==null?void 0:e.resistanceSlot2)==null?void 0:y.type)}),v.value.resistanceSlot3=f.find(o=>{var e,y;return o.value===((y=(e=S.value)==null?void 0:e.resistanceSlot3)==null?void 0:y.type)})))},l=(o,e)=>{var A,p;let y=(p=(A=a.value)==null?void 0:A.equipEffects)==null?void 0:p.find(_=>_.id===1068);if(y[e]={type:v.value[e].value,value:g.value.values[0]},Object.keys(y).forEach(_=>{var k;_!==e&&((k=y[_])==null?void 0:k.type)===v.value[e].value&&(y[_]={type:f[0].value,value:[]},v.value[_]=f[0])}),D.value){let _=[];Object.keys(y).forEach(k=>{var $;($=y[k])!=null&&$.type&&_.push(y[k].type)}),c.value=_,R("change",{type:"mastery",value:_})}},T=(o,e)=>{var A,p;let y=(p=(A=a.value)==null?void 0:A.equipEffects)==null?void 0:p.find(_=>_.id===1069);if(y[e]={type:v.value[e].value,value:S.value.values[0]},Object.keys(y).forEach(_=>{var k;_!==e&&((k=y[_])==null?void 0:k.type)===v.value[e].value&&(y[_]={type:f[0].value,value:[]},v.value[_]=f[0])}),D.value){let _=[];Object.keys(y).forEach(k=>{var $;($=y[k])!=null&&$.type&&_.push(y[k].type)}),c.value=_,R("change",{type:"resistance",value:_})}},d=()=>{Object.keys(b.value.equipment).forEach(o=>{b.value.equipment[o].item!==null&&b.value.equipment[o].item.equipEffects&&b.value.equipment[o].item.equipEffects.forEach(e=>{var y,A,p,_,k,$;e.id===1068&&g.value&&(e.values[2]>=1&&(e.masterySlot1={type:((y=v.value.masterySlot1)==null?void 0:y.value)||"empty",value:e.values[0]}),e.values[2]>=2&&(e.masterySlot2={type:((A=v.value.masterySlot2)==null?void 0:A.value)||"empty",value:e.values[0]}),e.values[2]>=3&&(e.masterySlot3={type:((p=v.value.masterySlot3)==null?void 0:p.value)||"empty",value:e.values[0]})),e.id===1069&&S.value&&(e.values[2]>=1&&(e.resistanceSlot1={type:((_=v.value.resistanceSlot1)==null?void 0:_.value)||"empty",value:e.values[0]}),e.values[2]>=2&&(e.resistanceSlot2={type:((k=v.value.resistanceSlot2)==null?void 0:k.value)||"empty",value:e.values[0]}),e.values[2]>=3&&(e.resistanceSlot3={type:(($=v.value.resistanceSlot3)==null?void 0:$.value)||"empty",value:e.values[0]}))})})},C=(o,e,y)=>{D.value=!1,a.value=b.value.equipment[o].item,E.value=!0,ae(()=>{let A=document.getElementById(m);A.style.position="fixed",A.style.left=`${e}px`,A.style.top=`${y}px`,n(),r()})},w=(o,e,y,A)=>{D.value=!0,c.value=o,U.value=e,E.value=!0,a.value={equipEffects:[]},e==="mastery"?a.value.equipEffects.push({id:1068,values:[-1,0,4],masterySlot1:{type:c.value[0]},masterySlot2:{type:c.value[1]},masterySlot3:{type:c.value[2]},masterySlot4:{type:c.value[3]}}):a.value.equipEffects.push({id:1069,values:[-1,0,4],resistanceSlot1:{type:c.value[0]},resistanceSlot2:{type:c.value[1]},resistanceSlot3:{type:c.value[2]},resistanceSlot4:{type:c.value[3]}}),ae(()=>{let p=document.getElementById(m);p.style.position="fixed",p.style.left=`${y}px`,p.style.top=`${A}px`,n(),r()})},N=()=>{E.value=!1};return L({open:C,openForDefaults:w}),(o,e)=>{const y=z("p-button"),A=z("p-image"),p=z("p-dropdown"),_=z("p-dialog");return t(),O(_,{id:V(m),visible:E.value,"onUpdate:visible":e[0]||(e[0]=k=>E.value=k)},{header:q(()=>[et]),default:q(()=>[s("div",tt,[D.value?(t(),i("div",st,[s("div",lt,[s("div",it,"Default Random "+h(U.value),1)]),at,x(y,{class:"close-button px-1 py-1",icon:"mdi mdi-close-thick",onClick:N})])):(t(),i("div",nt,[x(A,{src:`https://tmktahu.github.io/WakfuAssets/items/${a.value.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),s("div",ut,[s("div",ot,h(a.value.name),1),s("div",ct,[x(A,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${a.value.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),x(A,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${a.value.type.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),V(te).includes(a.value.type.id)?(t(),i("div",rt,"Item Level: "+h(a.value.id===12237?"25":"50"),1)):(t(),i("div",dt,"Level: "+h(a.value.level),1))])]),mt,x(y,{class:"close-button px-1 py-1",icon:"mdi mdi-close-thick",onClick:N})])),g.value?(t(),i("div",vt,[D.value?I("",!0):(t(),i("div",pt,h(o.$t("characterSheet.equipmentContent.masteryAssignment",{num:g.value.values[0]})),1)),s("div",{class:j(["flex justify-content-center gap-2 px-3",{"mt-3":D.value}])},[(t(!0),i(B,null,F(g.value.values[2],k=>(t(),O(p,{key:k,modelValue:v.value["masterySlot"+k],"onUpdate:modelValue":$=>v.value["masterySlot"+k]=$,class:"mastery-dropdown","option-label":"label",options:f,onChange:$=>l($,"masterySlot"+k)},{value:q($=>[$.value?(t(),i("div",ht,[x(A,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${$.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(t(),i("span",yt,[x(A,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:q($=>[s("div",ft,[s("div",gt,h(o.$t($.option.label)),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))),128))],2)])):I("",!0),S.value?(t(),i("div",_t,[D.value?I("",!0):(t(),i("div",kt,h(o.$t("characterSheet.equipmentContent.resistanceAssignment",{num:S.value.values[0]})),1)),s("div",{class:j(["flex justify-content-center gap-2 px-3",{"mt-3":D.value}])},[(t(!0),i(B,null,F(S.value.values[2],k=>(t(),O(p,{key:k,modelValue:v.value["resistanceSlot"+k],"onUpdate:modelValue":$=>v.value["resistanceSlot"+k]=$,class:"mastery-dropdown",options:f,"option-label":"label",onChange:$=>T($,"resistanceSlot"+k)},{value:q($=>[$.value?(t(),i("div",$t,[x(A,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${$.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(t(),i("span",xt,[x(A,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:q($=>[s("div",wt,[s("div",bt,h(o.$t($.option.label)),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))),128))],2)])):I("",!0),s("div",St,[x(y,{class:"py-2",label:o.$t("characterSheet.equipmentContent.applyToAllItems"),onClick:d},null,8,["label"])])])]),_:1},8,["id","visible"])}}},Ct=se(Et,[["__scopeId","data-v-7dcc434c"]]);const G=u=>(de("data-v-ded7c2bc"),u=u(),me(),u),At={class:"flex equipment-slots-wrapper"},It={key:0,class:"flex flex-column h-full",style:{"max-height":"60px"}},Tt={class:"simple-tooltip"},Wt=G(()=>s("div",{class:"flex-grow-1"},null,-1)),qt={class:"simple-tooltip"},Mt={key:0},Rt={class:"flex align-items-center justify-content-center w-full",style:{position:"relative"}},Lt={key:0,class:"random-stat-icons-wrapper"},Dt={key:1,class:"random-stat-icons-wrapper"},Ot={key:0,class:"item-card-tooltip"},Vt={class:"effect-header flex pt-2 px-1"},Bt={class:"flex flex-column"},jt={class:"item-name mr-2"},Nt={class:"flex"},Ft={key:0,class:"white-space-nowrap"},Pt={key:1,class:"white-space-nowrap"},Ut=G(()=>s("div",{class:"flex-grow-1"},null,-1)),Ht={class:"flex"},zt=G(()=>s("div",{class:"simple-tooltip"},"Open Encyclopedia Page",-1)),Yt={key:1,class:"flex align-items-center justify-content-center"},Gt={class:"flex align-items-center justify-content-center"},Jt=G(()=>s("div",{class:"hover-icon search"},[s("i",{class:"pi pi-search"})],-1)),Zt={class:"flex align-items-center justify-content-center w-full",style:{position:"relative"}},Qt=["onClick"],Xt=G(()=>s("i",{class:"pi pi-pencil"},null,-1)),Kt=[Xt],es=["onClick"],ts=G(()=>s("i",{class:"pi pi-trash"},null,-1)),ss=[ts],ls={key:0,class:"random-stat-icons-wrapper"},is={key:1,class:"random-stat-icons-wrapper"},as={key:0,class:"item-card-tooltip"},ns={class:"effect-header flex gap-1 pt-2 px-1"},us={class:"flex flex-column"},os={class:"item-name mr-2"},cs={class:"flex"},rs={key:0},ds={key:1},ms=G(()=>s("div",{class:"flex-grow-1"},null,-1)),vs={class:"flex"},ps=G(()=>s("div",{class:"simple-tooltip"},"Open Encyclopedia Page",-1)),hs={__name:"EquipmentButtons",props:{character:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1},withTotals:{type:Boolean,default:!1},withDefaultElemSelector:{type:Boolean,default:!1}},setup(u){const{t:L}=ne();let M=u;const R=_e(),{getItemEncyclopediaUrl:m}=xe(),b=ee("itemFilters"),E=H(null),D=Y(()=>{let d=c.value.equipment[P.FIRST_WEAPON.id].item;return d?!!d.type.disabledSlots.includes(P.SECOND_WEAPON.id):!1}),U=ee("masterData"),c=H(M.character),a=H({});ke(U,$e.debounce(()=>{ae(()=>{var d;c.value=M.character,a.value=(d=c.value)==null?void 0:d.equipment})},100),{immediate:!0});const v=d=>{b.itemTypeFilters.forEach(C=>{C.validSlots.includes(P[d])?C.checked=!0:C.checked=!1})},f=(d,C,w)=>{E.value.open(C,w.target.getBoundingClientRect().left-200,w.target.getBoundingClientRect().bottom+10)},g=(d,C,w)=>{E.value.openForDefaults(d,C,w.target.getBoundingClientRect().left-200,w.target.getBoundingClientRect().bottom+10)},S=({type:d,value:C})=>{d==="mastery"?le.value=C:ie.value=C},n=(d,C)=>{R.require({group:"popup",target:C.currentTarget,message:L("confirms.areYouSure"),accept:()=>{c.value.equipment[d].item=null}})},r=d=>{var C,w;return((w=(C=c.value.equipment[d].item)==null?void 0:C.equipEffects)==null?void 0:w.find(N=>N.id===1068))||null},l=d=>{var C,w;return((w=(C=c.value.equipment[d].item)==null?void 0:C.equipEffects)==null?void 0:w.find(N=>N.id===1069))||null},T=d=>{let C=m(d);window.open(C,"_blank")};return(d,C)=>{const w=z("p-image"),N=z("tippy"),o=z("p-button");return t(),i("div",At,[u.withDefaultElemSelector?(t(),i("div",It,[s("div",null,[x(N,null,{content:q(()=>[s("div",Tt,h(d.$t("characterSheet.equipmentContent.randomMasteryDefaults")),1)]),default:q(()=>[s("div",{class:"random-defaults-button flex align-items-center justify-content-center w-full",onClick:C[0]||(C[0]=e=>g(V(le),"mastery",e))},[(t(!0),i(B,null,F(V(le),e=>(t(),O(w,{key:e,src:`https://tmktahu.github.io/WakfuAssets/statistics/${e}_coin.png`,"image-style":"width: 24px"},null,8,["src"]))),128))])]),_:1})]),Wt,s("div",null,[x(N,{placement:"bottom",duration:"0"},{content:q(()=>[s("div",qt,h(d.$t("characterSheet.equipmentContent.randomResistanceDefaults")),1)]),default:q(()=>[s("div",{class:"random-defaults-button flex align-items-center justify-content-center w-full",onClick:C[1]||(C[1]=e=>g(V(ie),"resistance",e))},[(t(!0),i(B,null,F(V(ie),e=>(t(),O(w,{key:e,src:`https://tmktahu.github.io/WakfuAssets/statistics/${e}_coin.png`,"image-style":"width: 24px"},null,8,["src"]))),128))])]),_:1})])])):I("",!0),(t(!0),i(B,null,F(V(P),(e,y,A)=>(t(),i(B,{key:e.id},[u.readOnly?(t(),i("div",{key:0,class:j(["equipment-display",{"has-item":a.value[e.id]&&a.value[e.id].item!==null}])},[a.value[e.id]&&a.value[e.id].item?(t(),i("div",Mt,[x(X,{placement:"bottom",duration:"0"},{trigger:q(()=>[s("div",{class:j(["equipment-button",{"has-item":a.value[e.id].item!==null}])},[s("div",Rt,[x(w,{class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${a.value[e.id].item.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),r(e.id)!==null?(t(),i("div",Lt,[(t(!0),i(B,null,F(r(e.id).values[2],p=>(t(),O(w,{key:p,src:`https://tmktahu.github.io/WakfuAssets/statistics/${r(e.id)[`masterySlot${p}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):I("",!0),l(e.id)!==null?(t(),i("div",Dt,[(t(!0),i(B,null,F(l(e.id).values[2],p=>(t(),O(w,{key:p,src:`https://tmktahu.github.io/WakfuAssets/statistics/${l(e.id)[`resistanceSlot${p}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):I("",!0)])],2)]),content:q(()=>{var p,_,k,$,J,Z,Q;return[a.value[e.id].item?(t(),i("div",Ot,[x(re,{item:a.value[e.id].item,"with-totals":u.withTotals},null,8,["item","with-totals"]),s("div",Vt,[x(w,{src:`https://tmktahu.github.io/WakfuAssets/items/${(p=a.value[e.id].item)==null?void 0:p.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),s("div",Bt,[s("div",jt,h(d.$t(`items.${a.value[e.id].item.id}`)),1),s("div",Nt,[x(w,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${(_=a.value[e.id].item)==null?void 0:_.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),x(w,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${($=(k=a.value[e.id].item)==null?void 0:k.type)==null?void 0:$.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),V(te).includes((Z=(J=a.value[e.id].item)==null?void 0:J.type)==null?void 0:Z.id)?(t(),i("div",Ft," Item Level: "+h(a.value[e.id].item.id===12237?"25":"50"),1)):(t(),i("div",Pt,"Level: "+h((Q=a.value[e.id].item)==null?void 0:Q.level),1))])]),Ut,s("div",Ht,[x(N,{placement:"left"},{content:q(()=>[zt]),default:q(()=>[x(o,{icon:"pi pi-question-circle",class:"equip-button",onClick:ve=>T(a.value[e.id].item)},null,8,["onClick"])]),_:2},1024)])])])):I("",!0)]}),_:2},1024)])):(t(),i("div",Yt,[x(w,{src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${e.id}.png`,"image-style":"width: 60px"},null,8,["src"])]))],2)):(t(),i(B,{key:1},[!a.value[e.id]||a.value[e.id].item===null?(t(),O(o,{key:0,class:"equipment-button",onClick:p=>v(e.id)},{default:q(()=>{var p;return[s("div",Gt,[Jt,e.id===V(P).SECOND_WEAPON.id&&D.value?(t(),O(w,{key:0,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${(p=a.value[V(P).FIRST_WEAPON.id])==null?void 0:p.item.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])):(t(),O(w,{key:1,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${e.id}.png`,"image-style":"width: 60px"},null,8,["src"]))])]}),_:2},1032,["onClick"])):(t(),O(X,{key:1,placement:"bottom",duration:"0"},{trigger:q(()=>[s("div",{class:j(["equipment-button",{"has-item":a.value[e.id].item!==null}])},[s("div",Zt,[s("div",{class:"hover-icon edit",onClick:p=>f(A,e.id,p)},Kt,8,Qt),s("div",{class:"hover-icon remove",onClick:p=>n(e.id,p)},ss,8,es),x(w,{class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${a.value[e.id].item.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),r(e.id)!==null?(t(),i("div",ls,[(t(!0),i(B,null,F(r(e.id).values[2],p=>(t(),O(w,{key:p,src:`https://tmktahu.github.io/WakfuAssets/statistics/${r(e.id)[`masterySlot${p}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):I("",!0),l(e.id)!==null?(t(),i("div",is,[(t(!0),i(B,null,F(l(e.id).values[2],p=>(t(),O(w,{key:p,src:`https://tmktahu.github.io/WakfuAssets/statistics/${l(e.id)[`resistanceSlot${p}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):I("",!0)])],2)]),content:q(()=>{var p,_,k,$,J,Z,Q;return[a.value[e.id].item?(t(),i("div",as,[x(re,{item:a.value[e.id].item,"with-totals":u.withTotals},null,8,["item","with-totals"]),s("div",ns,[x(w,{src:`https://tmktahu.github.io/WakfuAssets/items/${(p=a.value[e.id].item)==null?void 0:p.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),s("div",us,[s("div",os,h(d.$t(`items.${a.value[e.id].item.id}`)),1),s("div",cs,[x(w,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${(_=a.value[e.id].item)==null?void 0:_.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),x(w,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${($=(k=a.value[e.id].item)==null?void 0:k.type)==null?void 0:$.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),V(te).includes((Z=(J=a.value[e.id].item)==null?void 0:J.type)==null?void 0:Z.id)?(t(),i("div",rs,"Item Level: "+h(a.value[e.id].item.id===12237?"25":"50"),1)):(t(),i("div",ds,"Level: "+h((Q=a.value[e.id].item)==null?void 0:Q.level),1))])]),ms,s("div",vs,[x(N,{placement:"left"},{content:q(()=>[ps]),default:q(()=>[x(o,{icon:"pi pi-question-circle",class:"equip-button",onClick:ve=>T(a.value[e.id].item)},null,8,["onClick"])]),_:2},1024)])])])):I("",!0)]}),_:2},1024))],64))],64))),128)),x(Ct,{ref_key:"editEquipmentModal",ref:E,onChange:S},null,512)])}}},fs=se(hs,[["__scopeId","data-v-ded7c2bc"]]),gs="/assets/addCompanion-b3d0cb0d.png";export{fs as E,re as I,X as M,gs as a,xe as u};
