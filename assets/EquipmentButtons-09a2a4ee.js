import{I as g,_ as K,O as ne,i as j,q as N,s as D,z as U,A as B,r as W,o as i,h as f,x as b,e as a,d as p,t as A,g as C,L as ee,c,F as R,f as F,l as $,p as te,j as se,u as ae,w as V}from"./index-3c0b618f.js";import{I as oe}from"./ItemStatList-d3cbe133.js";const ce=()=>{const v=m=>{let k=I(m),h="https://www.wakfu.com/en/mmorpg/encyclopedia",u="";return m.type.validSlots.includes(g.FIRST_WEAPON.id)||m.type.validSlots.includes(g.SECOND_WEAPON.id)?u=`${h}/weapons/${k}`:m.type.validSlots.includes(g.PET.id)?u=`${h}/pets/${k}`:m.type.validSlots.includes(g.MOUNT.id)?u=`${h}/mounts/${k}`:m.type.validSlots.includes(g.ACCESSORY.id)?u=`${h}/accessories/${k}`:u=`${h}/armors/${k}`,u},I=m=>{let k=m.id,h=m.name.toLowerCase().replace(" ","-");return`${k}-${h}`};return{getItemEncyclopediaUrl:v}};const ie=v=>(te("data-v-898f7755"),v=v(),se(),v),ue=ie(()=>a("div",{class:"drag-bar"},null,-1)),re={class:"edit-item-modal-content flex flex-column pb-2"},pe={class:"header-area flex px-3 pt-2 pb-1"},de={class:"flex flex-column ml-1"},me={class:"item-name mr-2 truncate",style:{"max-width":"15ch"}},he={class:"flex"},_e={key:0},ve={key:1},fe=ie(()=>a("div",{class:"flex-grow-1"},null,-1)),ye={key:0,class:"random-mastery-section flex flex-column px-3"},ge={class:"text-center w-full text-lg mb-2 pt-2"},ke={class:"flex justify-content-center gap-2 px-3"},xe={key:0,class:"flex align-items-center"},$e={key:1},be={class:"flex align-items-center py-1 px-2"},Se={class:"capitalize"},Ee={key:1,class:"random-resistance-section flex flex-column px-3"},qe={class:"text-center w-full text-lg mb-2 pt-2"},we={class:"flex justify-content-center gap-2 px-3"},Ae={key:0,class:"flex align-items-center"},Ce={key:1},We={class:"flex align-items-center py-1 px-2"},Ie={class:"capitalize"},Oe={__name:"EditEquipmentModal",setup(v,{expose:I}){let m=ne();const k=j("currentCharacter"),h=N(!1),u=N(null),r=N({}),y=[{value:"empty",label:"None",icon:"empty_coin"},{value:"water",label:"Water",icon:"water_coin"},{value:"earth",label:"Earth",icon:"earth_coin"},{value:"air",label:"Air",icon:"air_coin"},{value:"fire",label:"Fire",icon:"fire_coin"}],n=D(()=>{var o,e;return(e=(o=u.value)==null?void 0:o.equipEffects)==null?void 0:e.find(s=>s.id===1068)});U(n,()=>{B(()=>{r.value.masterySlot1=y.find(o=>{var e;return o.value===((e=n.value.masterySlot1)==null?void 0:e.type)||void 0}),r.value.masterySlot2=y.find(o=>{var e;return o.value===((e=n.value.masterySlot2)==null?void 0:e.type)||void 0}),r.value.masterySlot3=y.find(o=>{var e;return o.value===((e=n.value.masterySlot3)==null?void 0:e.type)||void 0})})});const S=D(()=>{var o,e;return(e=(o=u.value)==null?void 0:o.equipEffects)==null?void 0:e.find(s=>s.id===1069)});U(S,()=>{B(()=>{r.value.resistanceSlot1=y.find(o=>{var e;return o.value===((e=S.value.resistanceSlot1)==null?void 0:e.type)||void 0}),r.value.resistanceSlot2=y.find(o=>{var e;return o.value===((e=S.value.resistanceSlot2)==null?void 0:e.type)||void 0}),r.value.resistanceSlot3=y.find(o=>{var e;return o.value===((e=S.value.resistanceSlot3)==null?void 0:e.type)||void 0})})});const L=(o,e)=>{var l,_;let s=(_=(l=u.value)==null?void 0:l.equipEffects)==null?void 0:_.find(x=>x.id===1068);s[e]={type:r.value[e].value,value:n.value.values[0]},Object.keys(s).forEach(x=>{var t;x!==e&&((t=s[x])==null?void 0:t.type)===r.value[e].value&&(s[x]={type:y[0].value,value:[]},r.value[x]=y[0])})},M=()=>{Object.keys(r.value).forEach(o=>{var e,s;if(r.value[o]){let l=(s=(e=u.value)==null?void 0:e.equipEffects)==null?void 0:s.find(_=>_.id===1069);l[o]={type:r.value[o].value,value:S.value.values[0]}}})},E=(o,e,s)=>{u.value=k.value.equipment[o],h.value=!0,B(()=>{let l=document.getElementById(m);l.style.position="fixed",l.style.left=`${e}px`,l.style.top=`${s}px`})},q=()=>{h.value=!1};return I({open:E}),(o,e)=>{const s=W("p-image"),l=W("p-button"),_=W("p-dropdown"),x=W("p-dialog");return i(),f(x,{id:C(m),visible:h.value,"onUpdate:visible":e[0]||(e[0]=t=>h.value=t)},{header:b(()=>[ue]),default:b(()=>[a("div",re,[a("div",pe,[p(s,{src:`https://tmktahu.github.io/WakfuAssets/items/${u.value.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),a("div",de,[a("div",me,A(u.value.name),1),a("div",he,[p(s,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${u.value.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),p(s,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${u.value.type.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),C(ee).includes(u.value.type.id)?(i(),c("div",_e,"Item Level: 50")):(i(),c("div",ve,"Level: "+A(u.value.level),1))])]),fe,p(l,{class:"close-button px-1 py-1",icon:"mdi mdi-close-thick",onClick:q})]),n.value?(i(),c("div",ye,[a("div",ge,"+"+A(n.value.values[0])+" Mastery Assignment",1),a("div",ke,[(i(!0),c(R,null,F(n.value.values[2],t=>(i(),f(_,{key:t,modelValue:r.value["masterySlot"+t],"onUpdate:modelValue":d=>r.value["masterySlot"+t]=d,class:"mastery-dropdown",options:y,onChange:d=>L(d,"masterySlot"+t)},{value:b(d=>[d.value?(i(),c("div",xe,[p(s,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${d.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(i(),c("span",$e,[p(s,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:b(d=>[a("div",be,[a("div",Se,A(d.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))),128))])])):$("",!0),S.value?(i(),c("div",Ee,[a("div",qe,"+"+A(S.value.values[0])+" Resistance Assignment",1),a("div",we,[(i(!0),c(R,null,F(S.value.values[2],t=>(i(),f(_,{key:t,modelValue:r.value["resistanceSlot"+t],"onUpdate:modelValue":d=>r.value["resistanceSlot"+t]=d,class:"mastery-dropdown",options:y,onChange:M},{value:b(d=>[d.value?(i(),c("div",Ae,[p(s,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${d.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(i(),c("span",Ce,[p(s,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:b(d=>[a("div",We,[a("div",Ie,A(d.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])])):$("",!0)])]),_:1},8,["id","visible"])}}},Ne=K(Oe,[["__scopeId","data-v-898f7755"]]);const T=v=>(te("data-v-ad29c0e2"),v=v(),se(),v),Re={class:"flex equipment-slots-wrapper pr-3"},Te={key:0,class:"flex align-items-center justify-content-center"},Le={key:1,class:"flex align-items-center justify-content-center"},Me={class:"flex align-items-center justify-content-center"},Be=T(()=>a("div",{class:"hover-icon search"},[a("i",{class:"pi pi-search"})],-1)),Ve={class:"flex align-items-center justify-content-center w-full",style:{position:"relative"}},je=["onClick"],De=T(()=>a("i",{class:"pi pi-pencil"},null,-1)),Ue=[De],Fe=["onClick"],Pe=T(()=>a("i",{class:"pi pi-trash"},null,-1)),ze=[Pe],Ge={key:0,class:"random-stat-icons-wrapper"},Ye={key:1,class:"random-stat-icons-wrapper"},He={key:0,class:"item-card-tooltip"},Je={class:"effect-header flex pt-2 px-1"},Qe={class:"flex flex-column"},Xe={class:"item-name mr-2"},Ze={class:"flex"},Ke={key:0},et={key:1},tt=T(()=>a("div",{class:"flex-grow-1"},null,-1)),st={class:"flex"},it=T(()=>a("div",{class:"simple-tooltip"},"Open Encyclopedia Page",-1)),lt={__name:"EquipmentButtons",props:{character:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1}},setup(v){const I=v,m=ae(),{getItemEncyclopediaUrl:k}=ce(),h=j("itemFilters"),u=N(null),r=D(()=>{let e=n.value.equipment[g.FIRST_WEAPON.id];return e?!!e.type.disabledSlots.includes(g.SECOND_WEAPON.id):!1}),y=j("masterData"),n=N(I.character);U(y,()=>{n.value=I.character});const S=e=>{h.itemTypeFilters.forEach(s=>{s.validSlots.includes(g[e])?s.checked=!0:s.checked=!1})},L=(e,s,l)=>{u.value[e].open(s,l.target.getBoundingClientRect().left-200,l.target.getBoundingClientRect().bottom+10)},M=(e,s)=>{m.require({target:s.currentTarget,message:"Are you sure?",accept:()=>{n.value.equipment[e]=null}})},E=(e,s)=>{var l;return((l=n.value.equipment[e].equipEffects.find(_=>_.id===1068))==null?void 0:l[s])||null},q=(e,s)=>{var l;return((l=n.value.equipment[e].equipEffects.find(_=>_.id===1069))==null?void 0:l[s])||null},o=e=>{let s=k(e);window.open(s,"_blank")};return(e,s)=>{const l=W("p-image"),_=W("p-button"),x=W("tippy");return i(),c("div",Re,[(i(!0),c(R,null,F(C(g),(t,d,le)=>{var P,z,G;return i(),c(R,{key:t.id},[v.readOnly?(i(),c("div",{key:0,class:V(["equipment-display",{"has-item":n.value.equipment[t.id]!==null}])},[(z=(P=n.value)==null?void 0:P.equipment[t.id])!=null&&z.imageId?(i(),c("div",Te,[p(l,{src:`https://tmktahu.github.io/WakfuAssets/items/${(G=n.value.equipment[t.id])==null?void 0:G.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])])):(i(),c("div",Le,[p(l,{src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${t.id}.png`,"image-style":"width: 60px"},null,8,["src"])]))],2)):(i(),c(R,{key:1},[n.value.equipment[t.id]===null?(i(),f(_,{key:0,class:V(["equipment-button",{"has-item":n.value.equipment[t.id]!==null,disabled:t.id===C(g).SECOND_WEAPON.id&&r.value}]),onClick:w=>S(t.id)},{default:b(()=>{var w;return[a("div",Me,[Be,t.id===C(g).SECOND_WEAPON.id&&r.value?(i(),f(l,{key:0,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${(w=n.value.equipment[C(g).FIRST_WEAPON.id])==null?void 0:w.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])):(i(),f(l,{key:1,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${t.id}.png`,"image-style":"width: 60px"},null,8,["src"]))])]}),_:2},1032,["class","onClick"])):(i(),f(x,{key:1,placement:"bottom",interactive:""},{content:b(()=>{var w,O,Y,H,J,Q,X,Z;return[n.value.equipment[t.id]?(i(),c("div",He,[a("div",Je,[p(l,{src:`https://tmktahu.github.io/WakfuAssets/items/${(w=n.value.equipment[t.id])==null?void 0:w.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),a("div",Qe,[a("div",Xe,A((O=n.value.equipment[t.id])==null?void 0:O.name),1),a("div",Ze,[p(l,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${(Y=n.value.equipment[t.id])==null?void 0:Y.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),p(l,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${(J=(H=n.value.equipment[t.id])==null?void 0:H.type)==null?void 0:J.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),C(ee).includes((X=(Q=n.value.equipment[t.id])==null?void 0:Q.type)==null?void 0:X.id)?(i(),c("div",Ke,"Item Level: 50")):(i(),c("div",et,"Level: "+A((Z=n.value.equipment[t.id])==null?void 0:Z.level),1))])]),tt,a("div",st,[p(x,{placement:"left"},{content:b(()=>[it]),default:b(()=>[p(_,{icon:"pi pi-question-circle",class:"equip-button",onClick:nt=>o(n.value.equipment[t.id])},null,8,["onClick"])]),_:2},1024)])]),p(oe,{item:n.value.equipment[t.id]},null,8,["item"])])):$("",!0)]}),default:b(()=>{var w;return[a("div",{class:V(["equipment-button",{"has-item":n.value.equipment[t.id]!==null}])},[a("div",Ve,[a("div",{class:"hover-icon edit",onClick:O=>L(le,t.id,O)},Ue,8,je),a("div",{class:"hover-icon remove",onClick:O=>M(t.id,O)},ze,8,Fe),p(l,{class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${(w=n.value.equipment[t.id])==null?void 0:w.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),E(t.id,"masterySlot1")!==null?(i(),c("div",Ge,[E(t.id,"masterySlot1")!==null?(i(),f(l,{key:0,src:`https://tmktahu.github.io/WakfuAssets/statistics/${E(t.id,"masterySlot1").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0),E(t.id,"masterySlot2")!==null?(i(),f(l,{key:1,src:`https://tmktahu.github.io/WakfuAssets/statistics/${E(t.id,"masterySlot2").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0),E(t.id,"masterySlot3")!==null?(i(),f(l,{key:2,src:`https://tmktahu.github.io/WakfuAssets/statistics/${E(t.id,"masterySlot3").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0)])):$("",!0),q(t.id,"resistanceSlot1")!==null?(i(),c("div",Ye,[q(t.id,"resistanceSlot1")!==null?(i(),f(l,{key:0,src:`https://tmktahu.github.io/WakfuAssets/statistics/${q(t.id,"resistanceSlot1").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0),q(t.id,"resistanceSlot2")!==null?(i(),f(l,{key:1,src:`https://tmktahu.github.io/WakfuAssets/statistics/${q(t.id,"resistanceSlot2").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0),q(t.id,"resistanceSlot3")!==null?(i(),f(l,{key:2,src:`https://tmktahu.github.io/WakfuAssets/statistics/${q(t.id,"resistanceSlot3").type}_coin.png`,"image-style":"width: 16px"},null,8,["src"])):$("",!0)])):$("",!0)])],2)]}),_:2},1024)),p(Ne,{ref_for:!0,ref_key:"editEquipmentModal",ref:u},null,512)],64))],64)}),128))])}}},ct=K(lt,[["__scopeId","data-v-ad29c0e2"]]);export{ct as E,ce as u};
