import{L as R,_ as z,b as G,f as B,$ as ve,r as j,g as D,o as l,n as q,w as L,j as n,A as O,a0 as ie,t as p,q as V,Y as F,h as o,l as E,F as N,m as P,E as me,i as Y,k,J as ae,M as J,I as f,v as pe,a1 as ne,a2 as oe,N as ue,s as ce,x as re,a as he,y as ye,H as _e}from"./index-5f11d770.js";const ge=()=>{const a=$=>{let g=w($),u="https://www.wakfu.com/en/mmorpg/encyclopedia",v="";return $.type.validSlots.includes(R.FIRST_WEAPON.id)||$.type.validSlots.includes(R.SECOND_WEAPON.id)?v=`${u}/weapons/${g}`:$.type.validSlots.includes(R.PET.id)?v=`${u}/pets/${g}`:$.type.validSlots.includes(R.MOUNT.id)?v=`${u}/mounts/${g}`:$.type.validSlots.includes(R.ACCESSORY.id)?v=`${u}/accessories/${g}`:v=`${u}/armors/${g}`,v},w=$=>{let g=$.id,u=$.name.toLowerCase().replace(" ","-");return`${g}-${u}`};return{getItemEncyclopediaUrl:a}};const fe={class:"inline-tooltip-trigger",style:{width:"fit-content"}},ke={class:"state-title py-2 px-2"},$e={key:0,class:"px-2 py-1",style:{background:"var(--error-50)","white-space":"break-line","max-width":"45ch"}},xe={class:"state-description"},be={class:"flex flex-column"},we=["innerHTML"],Ee={__name:"MultiTooltip",props:{stateId:{type:String,default:""},currentLevel:{type:Number,default:1},sticky:{type:Boolean,default:!1}},setup(a){const w=a,{t:$}=G(),g=B(()=>ve.find(d=>d.id===w.stateId));let u=null;const v=j(0),r=d=>{d.isVisible&&v.value===0?u=setInterval(S,10):(clearInterval(u),v.value=0)},S=()=>{v.value++,v.value===100&&clearInterval(u)},T=d=>{var h,M,A,y,_;return`${d.indented?'<i class="mdi mdi-arrow-right-bottom" style="margin-top: -2px; margin-right: 4px;"></i>':""}${$(`states.${d.text}`,{img_fire:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/FIRE.png" /></div>',img_earth:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/EARTH.png" /></div>',img_water:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/WATER.png" /></div>',img_air:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/AIR.png" /></div>',img_physical:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/PHYSICAL.png" /></div>',img_light:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/LIGHT.png" /></div>',img_ecnbi:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/ecnbi.png" /></div>',img_ecnbr:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/ecnbr.png" /></div>',img_ally:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/ally.png" /></div>',img_enemy:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/enemy.png" /></div>',img_circling:'<div class="inline-img"><img src="https://tmktahu.github.io/WakfuAssets/misc/CIRCLERING.png" /></div>',num_0:`${(h=d.num_0)==null?void 0:h[`level_${w.currentLevel}`]}`,num_1:`${(M=d.num_1)==null?void 0:M[`level_${w.currentLevel}`]}`,num_2:`${(A=d.num_2)==null?void 0:A[`level_${w.currentLevel}`]}`,num_3:`${(y=d.num_3)==null?void 0:y[`level_${w.currentLevel}`]}`,num_4:`${(_=d.num_4)==null?void 0:_[`level_${w.currentLevel}`]}`})}`};return(d,h)=>{const M=D("p-progressBar"),A=D("tippy");return l(),q(A,me({duration:"0","max-width":"fit-content",interactive:v.value===100||!a.sticky,"interactive-border":a.sticky?2e3:20},d.$attrs,{onState:r}),{content:L(()=>[n("div",{class:O(["multi-tooltip",{stuck:v.value===100&&a.sticky}])},[ie(d.$slots,"content",{},()=>{var y,_;return[n("div",ke,[n("span",null,p(d.$t("tooltips.stateAtLevel",{state:d.$t(`states.${(y=g.value)==null?void 0:y.name}`),num_0:Math.min(V(F)[a.stateId],a.currentLevel)||a.currentLevel,num_1:V(F)[a.stateId]===void 0?"??":V(F)[a.stateId]})),1)]),a.stateId&&V(F)[a.stateId]===void 0?(l(),o("div",$e,p(d.$t("tooltips.missingInfoAboutState")),1)):E("",!0),n("div",xe,[n("div",be,[(l(!0),o(N,null,P((_=g.value)==null?void 0:_.descriptionData,i=>(l(),o("div",{key:i.text,class:O([{"pl-3":i.indented,"px-2":!i.indented,indented:i.indented},"description-line py-1"]),innerHTML:T(i)},null,10,we))),128))])])]},!0),a.sticky?(l(),q(M,{key:0,value:v.value,pt:{value:{style:{transition:"none"}}}},null,8,["value"])):E("",!0)],2)]),default:L(()=>[ie(d.$slots,"trigger",{},()=>{var y;return[n("div",fe,p(d.$t(`states.${(y=g.value)==null?void 0:y.name}`)),1)]},!0)]),_:3},16,["interactive","interactive-border"])}}},H=z(Ee,[["__scopeId","data-v-ae35f944"]]);const Se={class:"flex flex-column"},Ae={class:"effect-list-wrapper flex-grow-1",style:{"border-spacing":"0"}},Ce={class:"flex align-items-center w-full px-1 py-1"},Ie={key:0,class:"effect-text flex align-items-center"},Te={key:1,class:"effect-text"},Me={key:1,class:"equipped-item-effect",style:{"min-width":"50px"}},Le={key:1,class:"new-item-effect"},We={class:"flex align-items-center w-full px-1 py-1"},Re={key:1,class:"flex align-items-center"},Oe={key:2},qe={class:"flex align-items-center w-full px-1 py-1"},Ve={key:1,class:"effect-text flex align-items-center"},Ne={key:2,class:"effect-text"},De={key:0,class:"effect-line totals"},Be={key:0,class:"equipped-item-effect",style:{"border-top":"3px solid var(--secondary-70)"}},je={class:"flex align-items-center w-full px-1 py-1"},Pe={class:"new-item-effect",style:{"border-top":"3px solid var(--primary-70)"}},Ue={class:"flex align-items-center w-full px-1 py-1"},Fe={key:1,class:"effect-line totals"},He={key:0,class:"equipped-item-effect",style:{"border-top":"3px solid var(--secondary-70)"}},Ye={class:"flex align-items-center w-full px-1 py-1"},ze={class:"new-item-effect"},Ge={class:"flex align-items-center w-full px-1 py-1",style:{"border-top":"3px solid var(--primary-70)"}},Je={__name:"ItemStatList",props:{item:{type:Object,default:()=>{}},cardMode:{type:Boolean,default:!1},withComparisons:{type:Boolean,default:!1},withTotals:{type:Boolean,default:!1}},setup(a){let w=a;const{t:$}=G(),g=Y("currentCharacter"),u=B(()=>{var e,t;let m=w.item.type.validSlots[0];return((e=g.value.equipment[m])==null?void 0:e.id)!==((t=w.item)==null?void 0:t.id)?g.value.equipment[m]:null}),v=B(()=>{var m,e;let i={};return(e=(m=w.item)==null?void 0:m.equipEffects)==null||e.forEach(t=>{i[t.id]=t}),i}),r=B(()=>{var m,e;let i={};return(e=(m=u.value)==null?void 0:m.equipEffects)==null||e.forEach(t=>{i[t.id]=t}),i}),S=B(()=>[...Object.keys(v.value),...Object.keys(r.value)].filter((i,m,e)=>e.indexOf(i)===m)),T=i=>!!["400","1020"].includes(i),d=i=>{let m=Object.keys(f).find(e=>f[e].rawIds.includes(i));return m===void 0?null:f[m]},h=i=>{if(i.id===1068)return $("tooltips.randomMasteryValue",{num_0:i.values[0],num_1:i.values[2]});if(i.id===1069)return $("tooltips.randomResistanceValue",{num_0:i.values[0],num_1:i.values[2]});{let m=M(i),e=$(d(i.id).text);return`${m>0?"+":""}${m}${e.charAt(0)==="%"?"":" "}${e}`}},M=i=>{let m=i.values[0],e=0;return J.includes(w.item.type.id)?w.item.id===12237?e=m+25*i.values[1]:e=m+50*i.values[1]:e=m,Math.floor(e)},A=i=>{let m=0,e=v.value[i];e&&(m=M(e));let t=0,s=r.value[i];return s&&(t=M(s)),m-t},y=i=>{var t;let m=0,e=[...f.elementalMastery.rawIds,...f.fireMastery.rawIds,...f.earthMastery.rawIds,...f.waterMastery.rawIds,...f.airMastery.rawIds,...f.rearMastery.rawIds,...f.meleeMastery.rawIds,...f.distanceMastery.rawIds,...f.berserkMastery.rawIds,...f.criticalMastery.rawIds,...f.randomElementalMasteries.rawIds];return(t=i==null?void 0:i.equipEffects)==null||t.forEach(s=>{e.includes(s.id)&&(m+=s.values[0])}),m},_=i=>{var t;let m=0,e=[...f.rearResistance.rawIds,...f.elementalResistance.rawIds,...f.fireResistance.rawIds,...f.waterResistance.rawIds,...f.earthResistance.rawIds,...f.airResistance.rawIds,...f.criticalResistance.rawIds];return(t=i==null?void 0:i.equipEffects)==null||t.forEach(s=>{f.randomElementalResistances.rawIds.includes(s.id)?m+=s.values[0]*s.values[2]:e.includes(s.id)&&(m+=s.values[0])}),m};return(i,m)=>(l(),o("div",Se,[n("table",Ae,[(l(!0),o(N,null,P(S.value,e=>(l(),o(N,{key:`${a.item.id}-${e}`},[T(e)?E("",!0):(l(),o("tr",{key:0,class:O(["effect-line",{"with-comparison":u.value&&a.withComparisons}])},[u.value&&a.withComparisons?(l(),o(N,{key:0},[r.value[e]?(l(),o("td",{key:0,class:O(["equipped-item-effect",{"long-entry":r.value[e].longEntry}])},[n("div",Ce,[e==="304"?(l(),o("div",Ie,[n("span",null,p(i.$t("tooltips.addsStateLevels",{num_0:r.value[e].values[2]})),1),k(H,{"state-id":`${r.value[e].values[0]}`,"current-level":r.value[e].values[2]},null,8,["state-id","current-level"])])):(l(),o("div",Te,p(h(r.value[e])),1))])],2)):(l(),o("td",Me))],64)):E("",!0),v.value[e]?(l(),o("td",Le,[n("div",We,[u.value&&a.withComparisons?(l(),o("div",{key:0,class:O(["change-icon mr-1",{decrease:A(e)<0,increase:A(e)>0}])},p(A(e)>0?"+":"")+p(A(e)),3)):E("",!0),e==="304"?(l(),o("div",Re,[n("span",null,p(i.$t("tooltips.addsStateLevels",{num_0:v.value[e].values[2]})),1),k(H,{"state-id":`${v.value[e].values[0]}`,"current-level":v.value[e].values[2]},null,8,["state-id","current-level"])])):(l(),o("div",Oe,p(h(v.value[e])),1))])])):a.withComparisons?(l(),o("td",{key:2,class:O(["new-item-effect removed",{"long-entry":r.value[e].longEntry}])},[n("div",qe,[u.value&&a.withComparisons?(l(),o("div",{key:0,class:O(["change-icon mr-1",{decrease:A(e)<0,increase:A(e)>0}])},p(A(e)>0?"+":"")+p(A(e)),3)):E("",!0),e==="304"?(l(),o("div",Ve,[n("span",null,p(i.$t("tooltips.addsStateLevels",{num_0:r.value[e].values[2]})),1),k(H,{"state-id":`${r.value[e].values[0]}`,"current-level":r.value[e].values[2]},null,8,["state-id","current-level"])])):(l(),o("div",Ne,p(h(r.value[e])),1))])],2)):E("",!0)],2))],64))),128)),a.withTotals&&(u.value||y(a.item)>0||y(u.value)>0)?(l(),o("tr",De,[u.value&&a.withComparisons?(l(),o("td",Be,[n("div",je,p(y(u.value))+" "+p(i.$t("tooltips.totalMastery")),1)])):E("",!0),n("td",Pe,[n("div",Ue,[u.value?(l(),o("div",{key:0,class:O(["change-icon mr-1",{decrease:y(a.item)-y(u.value)<0,increase:y(a.item)-y(u.value)>0}])},p(y(a.item)-y(u.value)>0?"+":"")+p(y(a.item)-y(u.value)),3)):E("",!0),ae(" "+p(y(a.item))+" "+p(i.$t("tooltips.totalMastery")),1)])])])):E("",!0),a.withTotals&&(u.value||_(a.item)>0||_(u.value)>0)?(l(),o("tr",Fe,[u.value&&a.withComparisons?(l(),o("td",He,[n("div",Ye,p(_(u.value))+" "+p(i.$t("tooltips.totalResistance")),1)])):E("",!0),n("td",ze,[n("div",Ge,[u.value?(l(),o("div",{key:0,class:O(["change-icon mr-1",{decrease:_(a.item)-_(u.value)<0,increase:_(a.item)-_(u.value)>0}])},p(_(a.item)-_(u.value)>0?"+":"")+p(_(a.item)-_(u.value)),3)):E("",!0),ae(" "+p(_(a.item))+" "+p(i.$t("tooltips.totalResistance")),1)])])])):E("",!0)])]))}},Qe=z(Je,[["__scopeId","data-v-622eef00"]]);const de=a=>(ce("data-v-9586bbc3"),a=a(),re(),a),Xe=de(()=>n("div",{class:"drag-bar"},null,-1)),Ze={class:"edit-item-modal-content flex flex-column pb-2"},Ke={class:"header-area flex px-3 pt-2 pb-1"},et={class:"flex flex-column ml-1"},tt={class:"item-name mr-2 truncate",style:{"max-width":"15ch"}},st={class:"flex"},lt={key:0},it={key:1},at=de(()=>n("div",{class:"flex-grow-1"},null,-1)),nt={key:0,class:"random-mastery-section flex flex-column px-3"},ot={class:"text-center w-full text-lg mb-2 pt-2"},ut={class:"flex justify-content-center gap-2 px-3"},ct={key:0,class:"flex align-items-center"},rt={key:1},dt={class:"flex align-items-center py-1 px-2"},vt={class:"capitalize"},mt={key:1,class:"random-resistance-section flex flex-column px-3"},pt={class:"text-center w-full text-lg mb-2 pt-2"},ht={class:"flex justify-content-center gap-2 px-3"},yt={key:0,class:"flex align-items-center"},_t={key:1},gt={class:"flex align-items-center py-1 px-2"},ft={class:"capitalize"},kt={class:"flex justify-content-center mt-2"},$t={__name:"EditEquipmentModal",setup(a,{expose:w}){let $=pe();const g=Y("currentCharacter"),u=j(!1),v=j(null),r=j({}),S=[{value:"empty",label:"None",icon:"empty_coin"},{value:"water",label:"Water",icon:"water_coin"},{value:"earth",label:"Earth",icon:"earth_coin"},{value:"air",label:"Air",icon:"air_coin"},{value:"fire",label:"Fire",icon:"fire_coin"}],T=B(()=>{var e,t;return(t=(e=v.value)==null?void 0:e.equipEffects)==null?void 0:t.find(s=>s.id===1068)}),d=B(()=>{var e,t;return(t=(e=v.value)==null?void 0:e.equipEffects)==null?void 0:t.find(s=>s.id===1069)});ne.on(oe.UPDATE_RAND_ELEM_SELECTORS,()=>{h(),M()});const h=()=>{u.value&&T.value!==void 0&&(r.value.masterySlot1=S.find(e=>{var t;return e.value===((t=T.value.masterySlot1)==null?void 0:t.type)}),r.value.masterySlot2=S.find(e=>{var t;return e.value===((t=T.value.masterySlot2)==null?void 0:t.type)}),r.value.masterySlot3=S.find(e=>{var t;return e.value===((t=T.value.masterySlot3)==null?void 0:t.type)}))},M=()=>{u.value&&d.value!==void 0&&(r.value.resistanceSlot1=S.find(e=>{var t,s;return e.value===((s=(t=d.value)==null?void 0:t.resistanceSlot1)==null?void 0:s.type)}),r.value.resistanceSlot2=S.find(e=>{var t,s;return e.value===((s=(t=d.value)==null?void 0:t.resistanceSlot2)==null?void 0:s.type)}),r.value.resistanceSlot3=S.find(e=>{var t,s;return e.value===((s=(t=d.value)==null?void 0:t.resistanceSlot3)==null?void 0:s.type)}))},A=(e,t)=>{var x,W;let s=(W=(x=v.value)==null?void 0:x.equipEffects)==null?void 0:W.find(c=>c.id===1068);s[t]={type:r.value[t].value,value:T.value.values[0]},Object.keys(s).forEach(c=>{var C;c!==t&&((C=s[c])==null?void 0:C.type)===r.value[t].value&&(s[c]={type:S[0].value,value:[]},r.value[c]=S[0])})},y=()=>{Object.keys(r.value).forEach(e=>{var t,s;if(r.value[e]){let x=(s=(t=v.value)==null?void 0:t.equipEffects)==null?void 0:s.find(W=>W.id===1069);x[e]={type:r.value[e].value,value:d.value.values[0]}}})},_=()=>{Object.keys(g.value.equipment).forEach(e=>{g.value.equipment[e]!==null&&g.value.equipment[e].equipEffects&&g.value.equipment[e].equipEffects.forEach(t=>{var s,x,W,c,C,b;t.id===1068&&T.value&&(t.values[2]>=1&&(t.masterySlot1={type:((s=r.value.masterySlot1)==null?void 0:s.value)||"empty",value:t.values[0]}),t.values[2]>=2&&(t.masterySlot2={type:((x=r.value.masterySlot2)==null?void 0:x.value)||"empty",value:t.values[0]}),t.values[2]>=3&&(t.masterySlot3={type:((W=r.value.masterySlot3)==null?void 0:W.value)||"empty",value:t.values[0]})),t.id===1069&&d.value&&(t.values[2]>=1&&(t.resistanceSlot1={type:((c=r.value.resistanceSlot1)==null?void 0:c.value)||"empty",value:t.values[0]}),t.values[2]>=2&&(t.resistanceSlot2={type:((C=r.value.resistanceSlot2)==null?void 0:C.value)||"empty",value:t.values[0]}),t.values[2]>=3&&(t.resistanceSlot3={type:((b=r.value.resistanceSlot3)==null?void 0:b.value)||"empty",value:t.values[0]}))})}),ne.emit(oe.UPDATE_RAND_ELEM_SELECTORS)},i=(e,t,s)=>{v.value=g.value.equipment[e],u.value=!0,ue(()=>{let x=document.getElementById($);x.style.position="fixed",x.style.left=`${t}px`,x.style.top=`${s}px`,h(),M()})},m=()=>{u.value=!1};return w({open:i}),(e,t)=>{const s=D("p-image"),x=D("p-button"),W=D("p-dropdown"),c=D("p-dialog");return l(),q(c,{id:V($),visible:u.value,"onUpdate:visible":t[0]||(t[0]=C=>u.value=C)},{header:L(()=>[Xe]),default:L(()=>[n("div",Ze,[n("div",Ke,[k(s,{src:`https://tmktahu.github.io/WakfuAssets/items/${v.value.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),n("div",et,[n("div",tt,p(v.value.name),1),n("div",st,[k(s,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${v.value.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),k(s,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${v.value.type.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),V(J).includes(v.value.type.id)?(l(),o("div",lt,"Item Level: "+p(v.value.id===12237?"25":"50"),1)):(l(),o("div",it,"Level: "+p(v.value.level),1))])]),at,k(x,{class:"close-button px-1 py-1",icon:"mdi mdi-close-thick",onClick:m})]),T.value?(l(),o("div",nt,[n("div",ot,"+"+p(T.value.values[0])+" Mastery Assignment",1),n("div",ut,[(l(!0),o(N,null,P(T.value.values[2],C=>(l(),q(W,{key:C,modelValue:r.value["masterySlot"+C],"onUpdate:modelValue":b=>r.value["masterySlot"+C]=b,class:"mastery-dropdown","option-label":"label",options:S,onChange:b=>A(b,"masterySlot"+C)},{value:L(b=>[b.value?(l(),o("div",ct,[k(s,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${b.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(l(),o("span",rt,[k(s,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:L(b=>[n("div",dt,[n("div",vt,p(b.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))),128))])])):E("",!0),d.value?(l(),o("div",mt,[n("div",pt,"+"+p(d.value.values[0])+" Resistance Assignment",1),n("div",ht,[(l(!0),o(N,null,P(d.value.values[2],C=>(l(),q(W,{key:C,modelValue:r.value["resistanceSlot"+C],"onUpdate:modelValue":b=>r.value["resistanceSlot"+C]=b,class:"mastery-dropdown",options:S,"option-label":"label",onChange:y},{value:L(b=>[b.value?(l(),o("div",yt,[k(s,{src:`https://tmktahu.github.io/WakfuAssets/statistics/${b.value.icon}.png`,style:{height:"40px"},"image-style":"height: 40px; margin-top: -1px"},null,8,["src"])])):(l(),o("span",_t,[k(s,{src:"https://tmktahu.github.io/WakfuAssets/statistics/empty_coin.png",style:{height:"36px"},"image-style":"height: 36px; margin-top: 1px; margin-left: 2px"},null,8,["src"])]))]),option:L(b=>[n("div",gt,[n("div",ft,p(b.option.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])])):E("",!0),n("div",kt,[k(x,{class:"py-2",label:"Apply to all Items",onClick:_})])])]),_:1},8,["id","visible"])}}},xt=z($t,[["__scopeId","data-v-9586bbc3"]]);const U=a=>(ce("data-v-cae4378b"),a=a(),re(),a),bt={class:"flex equipment-slots-wrapper"},wt={key:0,class:"flex align-items-center justify-content-center"},Et={key:1,class:"flex align-items-center justify-content-center"},St={class:"flex align-items-center justify-content-center"},At=U(()=>n("div",{class:"hover-icon search"},[n("i",{class:"pi pi-search"})],-1)),Ct={class:"flex align-items-center justify-content-center w-full",style:{position:"relative"}},It=["onClick"],Tt=U(()=>n("i",{class:"pi pi-pencil"},null,-1)),Mt=[Tt],Lt=["onClick"],Wt=U(()=>n("i",{class:"pi pi-trash"},null,-1)),Rt=[Wt],Ot={key:0,class:"random-stat-icons-wrapper"},qt={key:1,class:"random-stat-icons-wrapper"},Vt={key:0,class:"item-card-tooltip"},Nt={class:"effect-header flex pt-2 px-1"},Dt={class:"flex flex-column"},Bt={class:"item-name mr-2"},jt={class:"flex"},Pt={key:0},Ut={key:1},Ft=U(()=>n("div",{class:"flex-grow-1"},null,-1)),Ht={class:"flex"},Yt=U(()=>n("div",{class:"simple-tooltip"},"Open Encyclopedia Page",-1)),zt={__name:"EquipmentButtons",props:{character:{type:Object,default:()=>{}},readOnly:{type:Boolean,default:!1},withTotals:{type:Boolean,default:!1}},setup(a){const{t:w}=G();let $=a;const g=he(),{getItemEncyclopediaUrl:u}=ge(),v=Y("itemFilters"),r=j(null),S=B(()=>{let e=d.value.equipment[R.FIRST_WEAPON.id];return e?!!e.type.disabledSlots.includes(R.SECOND_WEAPON.id):!1}),T=Y("masterData"),d=j($.character),h=j({});ye(T,_e.debounce(()=>{ue(()=>{var e;d.value=$.character,h.value=(e=d.value)==null?void 0:e.equipment})},100),{immediate:!0});const M=e=>{v.itemTypeFilters.forEach(t=>{t.validSlots.includes(R[e])?t.checked=!0:t.checked=!1})},A=(e,t,s)=>{r.value[e].open(t,s.target.getBoundingClientRect().left-200,s.target.getBoundingClientRect().bottom+10)},y=(e,t)=>{g.require({group:"popup",target:t.currentTarget,message:w("confirms.areYouSure"),accept:()=>{d.value.equipment[e]=null}})},_=e=>{var t,s;return((s=(t=d.value.equipment[e])==null?void 0:t.equipEffects)==null?void 0:s.find(x=>x.id===1068))||null},i=e=>{var t,s;return((s=(t=d.value.equipment[e])==null?void 0:t.equipEffects)==null?void 0:s.find(x=>x.id===1069))||null},m=e=>{let t=u(e);window.open(t,"_blank")};return(e,t)=>{const s=D("p-image"),x=D("p-button"),W=D("tippy");return l(),o("div",bt,[(l(!0),o(N,null,P(V(R),(c,C,b)=>{var Q,X;return l(),o(N,{key:c.id},[a.readOnly?(l(),o("div",{key:0,class:O(["equipment-display",{"has-item":h.value[c.id]!==null}])},[(Q=h.value[c.id])!=null&&Q.imageId?(l(),o("div",wt,[k(s,{src:`https://tmktahu.github.io/WakfuAssets/items/${(X=h.value[c.id])==null?void 0:X.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])])):(l(),o("div",Et,[k(s,{src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${c.id}.png`,"image-style":"width: 60px"},null,8,["src"])]))],2)):(l(),o(N,{key:1},[h.value[c.id]===null||h.value[c.id]===void 0?(l(),q(x,{key:0,class:O(["equipment-button",{"has-item":h.value[c.id]!==null,disabled:c.id===V(R).SECOND_WEAPON.id&&S.value}]),onClick:I=>M(c.id)},{default:L(()=>{var I;return[n("div",St,[At,c.id===V(R).SECOND_WEAPON.id&&S.value?(l(),q(s,{key:0,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${(I=h.value[V(R).FIRST_WEAPON.id])==null?void 0:I.imageId}.png`,"image-style":"width: 40px"},null,8,["src"])):(l(),q(s,{key:1,class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/equipmentDefaults/${c.id}.png`,"image-style":"width: 60px"},null,8,["src"]))])]}),_:2},1032,["class","onClick"])):(l(),q(H,{key:1,placement:"bottom",duration:"0"},{trigger:L(()=>[n("div",{class:O(["equipment-button",{"has-item":h.value[c.id]!==null}])},[n("div",Ct,[n("div",{class:"hover-icon edit",onClick:I=>A(b,c.id,I)},Mt,8,It),n("div",{class:"hover-icon remove",onClick:I=>y(c.id,I)},Rt,8,Lt),k(s,{class:"equipment-image",src:`https://tmktahu.github.io/WakfuAssets/items/${h.value[c.id].imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),_(c.id)!==null?(l(),o("div",Ot,[(l(!0),o(N,null,P(_(c.id).values[2],I=>(l(),q(s,{key:I,src:`https://tmktahu.github.io/WakfuAssets/statistics/${_(c.id)[`masterySlot${I}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):E("",!0),i(c.id)!==null?(l(),o("div",qt,[(l(!0),o(N,null,P(i(c.id).values[2],I=>(l(),q(s,{key:I,src:`https://tmktahu.github.io/WakfuAssets/statistics/${i(c.id)[`resistanceSlot${I}`].type}_coin.png`,"image-style":"width: 16px"},null,8,["src"]))),128))])):E("",!0)])],2)]),content:L(()=>{var I,Z,K,ee,te,se,le;return[h.value[c.id]?(l(),o("div",Vt,[k(Qe,{item:h.value[c.id],"with-totals":a.withTotals},null,8,["item","with-totals"]),n("div",Nt,[k(s,{src:`https://tmktahu.github.io/WakfuAssets/items/${(I=h.value[c.id])==null?void 0:I.imageId}.png`,"image-style":"width: 40px"},null,8,["src"]),n("div",Dt,[n("div",Bt,p(e.$t(`items.${h.value[c.id].id}`)),1),n("div",jt,[k(s,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/rarities/${(Z=h.value[c.id])==null?void 0:Z.rarity}.png`,"image-style":"width: 12px;"},null,8,["src"]),k(s,{class:"mr-1",src:`https://tmktahu.github.io/WakfuAssets/itemTypes/${(ee=(K=h.value[c.id])==null?void 0:K.type)==null?void 0:ee.id}.png`,"image-style":"width: 18px;"},null,8,["src"]),V(J).includes((se=(te=h.value[c.id])==null?void 0:te.type)==null?void 0:se.id)?(l(),o("div",Pt,"Item Level: "+p(h.value[c.id].id===12237?"25":"50"),1)):(l(),o("div",Ut,"Level: "+p((le=h.value[c.id])==null?void 0:le.level),1))])]),Ft,n("div",Ht,[k(W,{placement:"left"},{content:L(()=>[Yt]),default:L(()=>[k(x,{icon:"pi pi-question-circle",class:"equip-button",onClick:Gt=>m(h.value[c.id])},null,8,["onClick"])]),_:2},1024)])])])):E("",!0)]}),_:2},1024)),k(xt,{ref_for:!0,ref_key:"editEquipmentModal",ref:r},null,512)],64))],64)}),128))])}}},Qt=z(zt,[["__scopeId","data-v-cae4378b"]]),Xt="/assets/addCompanion-b3d0cb0d.png";export{Qt as E,Qe as I,H as M,Xt as a,ge as u};
